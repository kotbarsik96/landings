"use strict";(self["webpackChunkaudiofree"]=self["webpackChunkaudiofree"]||[]).push([[881],{5881:function(t,e,c){c.r(e),c.d(e,{default:function(){return G}});var a=c(3396),s=c(9242),o=c(7139);const r={class:"cart-page"},i={class:"cart-page__container container"},l={class:"page-title"},n={class:"page-title__links"},_=(0,a.Uk)("Главная"),d=(0,a.Uk)("Корзина"),u=(0,a._)("div",{class:"page-title__title"},"Корзина",-1),m={class:"cart-page__body"},p={class:"cart-list"},v={key:0,class:"cart-list__titles ctlt-titles"},g=(0,a.uE)('<div class="cart-list__title ctlt-titles__image"></div><div class="cart-list__title ctlt-titles__name">Название товара:</div><div class="cart-list__title ctlt-titles__price">Цена за штуку:</div><div class="cart-list__title ctlt-titles__amount">Количество:</div><div class="cart-list__title ctlt-titles__total">Сумма:</div><div class="cart-list__title ctlt-titles__cancel"></div>',6),k=[g],h={key:0,class:"__isempty"},y=(0,a.Uk)(" Корзина пуста. "),w=(0,a.Uk)("Подобрать что-нибудь"),C={class:"ctlt-item__image ctlt-item__item"},f=["src"],b={class:"ctlt-item__name ctlt-item__item"},I={class:"ctlt-item__price ctlt-item__item"},P=(0,a._)("div",{class:"cart-list__title"},"Цена за штуку:",-1),S={class:"ctlt-item__amount ctlt-item__item controls"},x={class:"controls__amount"},Y=["onClick"],E={class:"controls__amount--number"},W=["value","onInput"],D=["onClick"],T={class:"ctlt-item__total ctlt-item__item"},N=(0,a._)("div",{class:"cart-list__title cart-list__title--colored"},"Итого:",-1),U=["onClick"],q=(0,a._)("div",{class:"ctlt-item__cancel--icon __icon-cancel"},null,-1),z=[q],A=(0,a.uE)('<div class="cart-page__coupon"><p>Введите Ваш код купона, если он у вас есть:</p><form class="text-input"><div class="text-input__text"><input type="text" placeholder="Введите код"></div><button class="text-input__submit"><input type="button" value="Активировать"></button></form></div>',1),L={class:"cart-total"},R=(0,a._)("div",{class:"cart-total__text"},"Сумма заказа:",-1),j={key:0,class:"cart-total__number"},F=(0,a.Uk)("Оформить заказ");function $(t,e,c,g,q,$){const H=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("main",r,[(0,a._)("div",i,[(0,a._)("section",l,[(0,a._)("div",n,[(0,a.Wm)(H,{to:{name:"home"},class:"page-title__arrow-back __icon-back-arrow"}),(0,a.Wm)(H,{to:{name:"home"},class:"page-title__link-back"},{default:(0,a.w5)((()=>[_])),_:1}),(0,a.Wm)(H,{to:{name:$.cartType},class:"page-title__link-back"},{default:(0,a.w5)((()=>[d])),_:1},8,["to"])]),u]),(0,a._)("section",m,[(0,a._)("div",p,[$.cartIsEmpty?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",v,k)),(0,a.Wm)(s.W3,{name:"cart-list",tag:"div",class:"cart-list__container"},{default:(0,a.w5)((()=>[$.cartIsEmpty?((0,a.wg)(),(0,a.iD)("div",h,[y,(0,a.Wm)(H,{to:"/catalogue"},{default:(0,a.w5)((()=>[w])),_:1})])):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(q.cartProducts,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"cart-list__item ctlt-item",key:e.id},[(0,a._)("div",C,[(0,a.Wm)(H,{to:"/products/"+e.vendorCode},{default:(0,a.w5)((()=>[(0,a._)("img",{src:"/img/products/"+t.products[e.vendorCode].images[0],alt:""},null,8,f)])),_:2},1032,["to"])]),(0,a._)("div",b,[(0,a.Wm)(H,{to:"/products/"+e.vendorCode},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.products[e.vendorCode].name)+" ("+(0,o.zw)(e.color.toLowerCase())+")",1)])),_:2},1032,["to"])]),(0,a._)("div",I,[P,(0,a._)("p",null,(0,o.zw)(t.products[e.vendorCode].price.toLocaleString())+" ₽",1)]),(0,a._)("div",S,[(0,a._)("div",x,[(0,a._)("div",{class:"controls__amount--less controls__amount-button __icon-back-arrow",onClick:t=>$.changeAmount(t,"less",e.id)},null,8,Y),(0,a._)("div",E,[(0,a._)("input",{type:"text",value:e.amount,maxlength:"2",onInput:t=>$.changeAmount(t,"typing",e.id)},null,40,W)]),(0,a._)("div",{class:"controls__amount--more controls__amount-button __icon-next-arrow",onClick:t=>$.changeAmount(t,"more",e.id)},null,8,D)])]),(0,a._)("div",T,[N,(0,a._)("p",null,(0,o.zw)((t.products[e.vendorCode].price*e.amount).toLocaleString())+" ₽",1)]),"cart"===$.cartType?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"ctlt-item__cancel ctlt-item__item",onClick:t=>$.removeFromCart(e.id,e)},z,8,U)):(0,a.kq)("",!0)])))),128))])),_:1})]),(0,a._)("div",{class:"cart-page__info",style:(0,o.j5)({display:$.cartIsEmpty?"none":""})},[A,(0,a._)("div",L,[R,$.totalPrice?((0,a.wg)(),(0,a.iD)("div",j,(0,o.zw)($.totalPrice.toLocaleString())+" ₽",1)):(0,a.kq)("",!0)])],4)]),(0,a._)("section",{class:"order-button",style:(0,o.j5)({display:$.cartIsEmpty?"none":""})},[(0,a.Wm)(H,{to:{name:q.orderRouteName},class:"button button--colored-bg"},{default:(0,a.w5)((()=>[F])),_:1},8,["to"])],4)])])}var H=c(268),K=c(65),O={name:"CartPage",data(){return{cartProducts:[],orderRouteName:"order"}},computed:{...(0,K.Se)(["products"]),cartType(){switch(this.$route.name){case"cart":return this.orderRouteName="order","cart";case"cart-oneclick":return this.orderRouteName="order-oneclick","cart-oneclick"}},cartIsEmpty(){return this.cartProducts.length<1},totalPrice(){let t=0;return this.cartProducts.forEach((e=>{const c=this.products[e.vendorCode];c&&(t+=c.price*e.amount)})),t}},methods:{...(0,K.OI)(["addNotification"]),getStorageCartProducts(){switch(this.cartType){case"cart-oneclick":this.cartProducts=H.IY.getStorage(H.IY.keys["cart-oneclick"]).filter((t=>t&&t.vendorCode))||[];break;case"cart":this.cartProducts=H.IY.getStorage(H.IY.keys.cart).filter((t=>t&&t.vendorCode))||[];break}},changeAmount(t,e,c){const a=t.target.closest(".controls__amount").querySelector("input[type='text']"),s=(0,H.rh)(a,e);this.cartProducts.forEach((t=>(t.id===c&&(t.amount=parseInt(s)),t)))},removeFromCart(t,e){let c;this.cartProducts=this.cartProducts.filter(((e,a)=>e.id!==t||(c=a,!1))),this.addNotification({message:[`Товар ${this.products[e.vendorCode].name} убран из корзины.`,{node:'<span class="link-cancel">Отменить</span>',handler:()=>this.returnToCart(e,c)}],timetolive:3500})},returnToCart(t,e){const c=H.IY.keys.cart,a=H.IY.getStorage(c);a.splice(e,0,t),H.IY.setStorage(c,a),this.getStorageCartProducts()}},watch:{cartProducts:{handler(){H.IY.setStorage(H.IY.keys[this.cartType],this.cartProducts)},deep:!0}},created(){this.getStorageCartProducts()}},Z=c(89);const B=(0,Z.Z)(O,[["render",$]]);var G=B}}]);
//# sourceMappingURL=881.7fcd8c64.js.map