class Slider{constructor(e,t={}){this.setSlidesWidth=this.setSlidesWidth.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.initSlider=this.initSlider.bind(this),this.disableSlider=this.disableSlider.bind(this),this.sliderOnResize=this.sliderOnResize.bind(this),t.disabled||(t.disabled=!1),this.selector=e||".slider",this.sliders=Array.from(document.querySelectorAll(this.selector)),this.getParams(t),this.paramsOnInit=t,document.querySelectorAll(`.${this.listClass}`).forEach((e=>{e.addEventListener("transitionend",(()=>{e.style.removeProperty("transition")}))})),this.disabled?this.disableSlider():this.initSlider(),this.initMediaQueries()}getParams(e){(t=t.bind(this))("listClass","slider__list"),t("slideClass","slider__slide"),t("slidesAmount",1),t("spaceBetween",10),t("slideWidth",0),t("media",{}),t("speed",500),t("pagination",{on:!1,className:"slider__pagination",type:"bullets",indexText:"",delimeterText:"из",totalText:"",indexTextPosition:"afterbegin",totalTextPosition:"beforeend"}),t("controls",{on:!1,className:"slider__controls",iconName:"icon-arrow-back",rotateButton:"next",prevButton:{className:"slider__control slider__control--prev"},nextButton:{className:"slider__control slider__control--next"}}),t("grabCursor",!1),t("draggable",!0);for(let t in e){const i=e[t];if("object"!=typeof i||null===i)this[t]=e[t];else{this[t]||(Array.isArray(i)?this[t]=[]:this[t]={});for(let e in i)this[t][e]=i[e]}}function t(e,t){void 0===this[e]&&(this[e]=t)}}initMediaQueries(){const e=this.media&&"object"==typeof this.media&&!Array.isArray(this.media);if(this.mediaQueries||(this.mediaQueries={}),e)for(let e in this.media){e=parseInt(e);const t=window.matchMedia(`(min-width: ${e}px)`);this.mediaQueries[e]=t.matches,t.addEventListener("change",(()=>{this.mediaQueries||(this.mediaQueries={}),this.mediaQueries[e]=t.matches,this.onMediaQueryChange(e)})),t.dispatchEvent(new Event("change"))}}onMediaQueryChange(e){if(this.mediaQueries[e]){this.getParams(this.paramsOnInit);for(let t in this.mediaQueries)if(parseInt(t)<parseInt(e)&&this.mediaQueries[e]){const e=this.media[t];this.getParams(e)}const t=this.media[e];this.getParams(t)}if(Object.values(this.mediaQueries).find((e=>e))){this.getParams(this.paramsOnInit);for(let e in this.mediaQueries)if(this.mediaQueries[e]){const t=this.media[e];this.getParams(t)}}else this.getParams(this.paramsOnInit);this.disabled?this.disableSlider():this.initSlider()}createPagination(){function e(e){const t=this.getSliderData(e).slides;let i=e.querySelector(`.${this.pagination.className.split(" ")[0]}`);i&&"UL"===i.tagName||(i=createElement("ul",this.pagination.className),e.append(i)),i.classList.remove("__removed"),i.innerHTML="";for(let s=0;s<t.length;s++){const t=createElement("li","slider__pagination-item"),n=createElement("button","slider__pagination-button");n.setAttribute("aria-label","Пролистать слайд"),t.append(n),i.append(t),t.addEventListener("click",(()=>{i.querySelectorAll(".slider__pagination-item").forEach((e=>e.classList.remove("slider__pagination-item--active"))),this.slideTo(e,s),t.classList.add("slider__pagination-item--active")}))}}function t(e){const t=this.getSliderData(e).slides;let i=e.querySelector(`.${this.pagination.className.split(" ")[0]}`);i||(i=createElement("div",this.pagination.className),e.append(i));const s=`\n                <span class="slider__pagination-number slider__pagination-number--index"></span>\n                <span class="slider__pagination-delimeter">${this.pagination.delimeterText}</span>\n                <span class="slider__pagination-number slider__pagination-number--total">\n                    ${" "+t.length+" "}\n                </span>\n            `;i.insertAdjacentHTML("afterbegin",s),i.querySelector(".slider__pagination-number--total").insertAdjacentText(this.pagination.totalTextPosition,this.pagination.totalText)}this.sliders.forEach((i=>{switch(this.pagination.type){case"bullets":default:e.call(this,i);break;case"numbers":t.call(this,i)}}))}setPagination(e,t){switch(t=parseInt(t),this.pagination.type){case"bullets":default:(function(){e.querySelectorAll(".slider__pagination-item").forEach(((e,i)=>{i!=t?e.classList.remove("slider__pagination-item--active"):e.classList.add("slider__pagination-item--active")}))}).call(this);break;case"numbers":(function(){const i=e.querySelector(".slider__pagination-number--index");if(!i)return;i.innerHTML=" "+(t+1)+" ",i.insertAdjacentText(this.pagination.indexTextPosition,this.pagination.indexText)}).call(this)}}removePagination(){this.sliders.forEach((e=>{const t=e.querySelector(`.${this.pagination.className}`);t&&t.classList.add("__removed")}))}createControls(){this.sliders.forEach((e=>{let t=e.querySelector(`.${this.controls.className.split(" ")[0]}`);if(!t){t=createElement("div",this.controls.className),e.append(t);const i=this.controls.prevButton.className+" "+this.controls.iconName,s=this.controls.nextButton.className+" "+this.controls.iconName,n=createElement("button",i);n.setAttribute("aria-label","Листать слайдер назад");const r=createElement("button",s);r.setAttribute("aria-label","Листать слайдер вперед"),t.append(n),t.append(r),"prev"===this.controls.rotateButton&&n.classList.add("__rotated"),"next"===this.controls.rotateButton&&r.classList.add("__rotated"),n.addEventListener("click",(()=>this.slidePrev(e))),r.addEventListener("click",(()=>this.slideNext(e))),this.slidersData.forEach((e=>{e.controls={prevButton:n,nextButton:r}}))}t.classList.remove("__removed"),e.querySelector(`.${this.controls.prevButton.className.split(" ")[0]}`).removeAttribute("disabled"),e.querySelector(`.${this.controls.nextButton.className.split(" ")[0]}`).removeAttribute("disabled")}))}removeControls(){this.sliders.forEach((e=>{const t=e.querySelector(`.${this.controls.className.split(" ")[0]}`);t&&t.classList.add("__removed")}))}initScriptElement(){this.disabled?this.disableSlider():this.initSlider()}getNewSliders(){const e=Array.from(document.querySelectorAll(this.selector)).filter((e=>!this.sliders.includes(e)));this.sliders=this.sliders.concat(e),this.setPointerdownHandlers(e)}setPointerdownHandlers(e){e.forEach((e=>{const t=e.querySelector(`.${this.listClass}`);this.draggable&&t.addEventListener("pointerdown",this.onPointerDown),this.slidersData.find((t=>t.sliderContainer===e))||this.slidersData.push({sliderContainer:e,slidesList:e.querySelector(`.${this.listClass}`),slides:Array.from(e.querySelectorAll(`.${this.slideClass}`)),currentIndex:0,moved:0})}))}initSlider(){setTimeout((()=>{this.getNewSliders(),this.resizeListeners||(window.addEventListener("resize",this.setSlidesWidth),window.addEventListener("resize",this.sliderOnResize),this.resizeListeners=!0),this.pointerDownListeners||(this.slidersData=[],this.setPointerdownHandlers(this.sliders),this.pointerDownListeners=!0),this.setSlidesWidth(),setTimeout(this.setSlidesWidth,250),this.pagination.on?this.createPagination():this.removePagination(),this.controls.on?this.createControls():this.removeControls(),this.sliders.forEach((e=>{e.classList.add("slider--active"),this.setPagination(e,0),this.slideTo(e,0),this.grabCursor&&e.classList.add("slider--grab");e.querySelectorAll(`.${this.slideClass}`).forEach(((e,t)=>e.dataset.sliderSlideIndex=t)),e.dispatchEvent(new CustomEvent("sliderinit"))}))}),0)}disableSlider(){setTimeout((()=>{window.removeEventListener("resize",this.setSlidesWidth),window.removeEventListener("resize",this.sliderOnResize),this.resizeListeners=!1,this.slidersData=[],this.sliders.forEach((e=>{e.classList.remove("slider--active");e.querySelector(`.${this.listClass}`).removeEventListener("pointerdown",this.onPointerDown),e.querySelector(`.${this.listClass}`).style.removeProperty("transform"),e.classList.remove("slider--grab")})),this.pointerDownListeners=!1,this.removeControls(),this.removePagination(),this.unsetSlidesWidth()}),0)}update(){this.setSlidesWidth()}unsetSlidesWidth(){this.sliders.forEach((e=>{const t=e.querySelector(`.${this.listClass}`),i=e.querySelectorAll(`.${this.slideClass}`);t.style.removeProperty("width"),i.forEach((e=>{e.style.removeProperty("width"),e.style.removeProperty("margin-right")}))}))}setSlidesWidth(){this.sliders.forEach((e=>{const t=this.getSliderData(e);if(!t)return;const i=t.slidesList,s=t.slides,n=this.spaceBetween*(s.length-1);if(s.forEach(((e,t)=>{e.style.marginLeft=this.spaceBetween/2+"px",t<s.length-1&&(e.style.marginRight=this.spaceBetween/2+"px")})),parseInt(this.slideWidth)>0){s.forEach((e=>e.style.width=`${this.slideWidth}px`));const e=s.length*this.slideWidth+n;i.style.width=`${e}px`}else{const t=e.offsetWidth/this.slidesAmount,r=t*s.length+n;s.forEach((e=>e.style.width=`${t}px`)),i.style.width=r-t/25+"px"}}))}isOverLimit(e){if(e){const t=getCoords(e),i=getCoords(e.querySelector(`.${this.listClass}`));return t.left<i.left?"left":t.right>i.right&&"right"}}getSliderData(e){const t=this.slidersData.findIndex((t=>t.sliderContainer===e));return this.slidersData[t]}onPointerDown(e){a=a.bind(this),l=l.bind(this),o=o.bind(this);const t=e.clientX;let i=e.clientX;const s=e.target.classList.contains(this.listClass)?e.target:e.target.closest(`.${this.listClass}`),n=s.closest(this.selector),r=n.querySelectorAll("a");function a(e){const t=e.clientX;r.forEach((e=>e.style.pointerEvents="none")),t>i&&o("+",t,i),t<i&&o("-",t,i),i=t,s.style.removeProperty("transition")}function l(){if(document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",l),r.forEach((e=>e.style.removeProperty("pointer-events"))),"left"===this.isOverLimit(n))this.slideTo(n,0);else if("right"===this.isOverLimit(n))this.slideTo(n,"last");else{const e=n.querySelector(`.${this.slideClass}`).offsetWidth;i>t+100&&i<t+e?this.slidePrev(n):i<t-100&&i>t-e?this.slideNext(n):this.slideTo(n,"nearest")}n.classList.remove("slider--moving")}function o(e,t,i){let r;"+"===e&&(r=1),"-"===e&&(r=-1);const a=Math.abs(i-t),l=this.getSliderData(n),o=l.moved;let d;d=o+a*r;const h=this.isOverLimit(n);h&&("right"===h&&r<0||"left"===h&&r>0)&&(d=o+r),s.style.transform=`translate(${d}px, 0)`,l.moved=d}this.grabCursor&&n.classList.add("slider--moving"),e.preventDefault(),e.target.ondragstart=()=>!1,document.addEventListener("pointermove",a),document.addEventListener("pointerup",l)}slideNext(e){setTimeout((()=>{const t=this.getSliderData(e).currentIndex;this.slideTo(e,t+1)}),0)}slidePrev(e){setTimeout((()=>{const t=this.getSliderData(e).currentIndex;this.slideTo(e,t-1)}),0)}slideTo(e,t,i={}){const s=this.getSliderData(e),n=s.slidesList,r=s.slides;if(r){const a=getCoords(e),l=getCoords(n);if("nearest"===t){const t=r.map((e=>Math.abs(a.left-Math.abs(getCoords(e).left)))),s=Math.min(...t),n=t.findIndex((e=>e===s));return void this.slideTo(e,n,i.ignoreSpeed)}if((t>=r.length-1||"last"===t)&&(t=r.length-1),t>=0){n.style.transition=`all ${this.speed/1e3}s`;let o=-1*(r[t].offsetWidth*t+this.spaceBetween*t);const d=this.getSliderData(e).controls||{},h=d.prevButton,c=d.nextButton,m=o+a.left+n.offsetWidth;if(a.right>l.right||a.right>m){const e=a.right-l.right;o=l.left-a.left+e,c&&c.setAttribute("disabled","")}else c&&c.removeAttribute("disabled");o>0&&(o=0),o>=0?h&&h.setAttribute("disabled",""):h&&h.removeAttribute("disabled"),i.ignoreSpeed&&(n.style.transition="all 0s",setTimeout((()=>n.style.removeProperty("transition")),50)),n.style.transform=`translate(${o}px, 0)`,s.moved=o,s.currentIndex=parseInt(t),this.setPagination(e,t);const p=r.find(((e,i)=>i==t)),u=r.find((e=>e.classList.contains("slider__slide--active")));if(p===u)return;if(r.forEach((e=>e.classList.remove("slider__slide--active"))),p&&p.classList.add("slider__slide--active"),i.noEvent)return;e.dispatchEvent(new CustomEvent("slidechange",{detail:{activeSlide:p,prevSlide:u}}))}}}sliderOnResize(){this.sliders.forEach((e=>{this.slideTo(e,"nearest")}))}}const sliders=[new Slider(".article-cards",{slidesAmount:1,slideWidth:300,speed:300,spaceBetween:10,pagination:{on:!0},media:{720:{slideWidth:400,pagination:{on:!1}},1248:{disabled:!0}}}),new Slider(".companies-logos__slider",{slideWidth:125,speed:300,spaceBetween:0,media:{720:{disabled:!0}}}),new Slider(".similar-companies__wrap",{slideWidth:330,spaceBetween:10,media:{1248:{disabled:!0}}}),new Slider(".cv-templates-list__slider",{slidesAmount:1,grabCursor:!0,controls:{on:!0},media:{720:{slidesAmount:2},1010:{disabled:!0}}}),new Slider(".tips-slider",{slidesAmount:1,grabCursor:!0,controls:{on:!0},media:{510:{slidesAmount:2},800:{slidesAmount:3},1248:{slideWidth:300,slidesAmount:null}}}),new Slider(".template-block__slider",{slidesAmount:1,controls:{on:!0,iconName:"icon-chevron-down",rotateButton:0},pagination:{on:!0,type:"numbers"},media:{720:{speed:0,draggable:!1,controls:{on:!1},pagination:{on:!1}}}})];setScriptElementsObserver(sliders);