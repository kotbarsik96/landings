const jobsDataURL=`${rootPath}json/jobs.json`;class JobDetailState{constructor(){this.isEmbedded=0==document.body.hasAttribute("data-job-detail")}defineState(){setTimeout((()=>{const t=this.jobId;this.isEmbedded?this.jobId=window.location.hash.replace("#",""):this.jobId=window.location.pathname.match(/\/\d+\//g)[0].replace(/\//g,"");inittedInputs.filter((t=>t instanceof JobDetailListItem)).forEach((t=>t.setState())),this.jobId!=t&&(this.jobId?this.setShowState():this.setHideState())}),100)}setShowState(){document.querySelectorAll(".--jobs-full-elem").forEach((t=>{t.className=t.className.replace("--jobs-full-elem","--jobs-resizable-elem")}));inittedInputs.filter((t=>t instanceof JobDetail)).forEach((t=>t.setShowState()));inittedInputs.filter((t=>t instanceof JobsListing)).forEach((t=>t.changeInfoBoxLink({jobId:this.jobId})))}setHideState(){document.querySelectorAll(".--jobs-resizable-elem").forEach((t=>{t.className=t.className.replace("--jobs-resizable-elem","--jobs-full-elem")}));inittedInputs.filter((t=>t instanceof JobDetail)).forEach((t=>t.setHideState()));inittedInputs.filter((t=>t instanceof JobsListing)).forEach((t=>t.changeInfoBoxLink({doRemove:!0})))}}const jobDetailState=new JobDetailState;function loadAndGetIcon(t){return new Promise((e=>{const i=`${rootPath}${t}`;fetch(i).then((t=>{if(!t.ok)return e("");t.text().then((t=>e(t)))}))}))}jobDetailState.isEmbedded&&window.addEventListener("hashchange",jobDetailState.defineState.bind(jobDetailState));class JobsListing{constructor(t){this.onJobsSearchSubmit=this.onJobsSearchSubmit.bind(this),this.removeTag=this.removeTag.bind(this),this.renderJobs=this.renderJobs.bind(this),this.loadJobs=this.loadJobs.bind(this),this.rootElem=observeNodeBeforeInit(t),this.title=this.rootElem.querySelector(".jobs-search-list__title"),this.emptyResult=this.rootElem.querySelector(".jobs-search-list__empty-result"),this.infoBox=this.rootElem.querySelector(".jobs-search-list__info-box"),this.jobsListContainer=this.rootElem.querySelector(".jobs-list"),this.loadMore=this.rootElem.querySelector(".more-jobs"),this.tagsList=this.rootElem.querySelector(".jobs-filter-buttons__tags"),this.alarmDisruptorPill=this.rootElem.querySelector(".jobs-search__alarm-disruptor__pill"),this.companySearch=document.querySelector("input[name='keywords']"),this.locationSearch=document.querySelector("input[name='locations']"),this.radiusInputs=Array.from(document.querySelectorAll("input[name='proximity-radius']")),this.filterListItemNames=["professional-area","employment-type","work-experience","salary"],this.filterInputs=[],this.createdTags=[],this.jobsRendered=[],this.jobsSearchForm=document.querySelector("#jobs-search-form"),this.maxJobsOnLoad=2,this.emptyResult.classList.add("__removed"),this.infoBox.classList.add("__removed"),this.getFilterInputs(),this.jobsSearchForm.addEventListener("submit",this.onJobsSearchSubmit),this.jobsSearchForm.addEventListener("loadedReady",this.onJobsSearchSubmit),this.loadMore.addEventListener("click",this.loadJobs),this.loadJobs(),this.alarmDisruptorPill&&this.alarmDisruptorPill.classList.add("__removed")}getFilterInputs(){this.filterListItemNames.forEach((t=>{document.querySelectorAll(`input[name="${t}"]`).forEach((t=>{this.filterInputs.find((e=>e===t))||this.filterInputs.push(t)}))}))}createButtonLoading(){if(this.loadMore.querySelector(".loading-box"))return;this.loadMore.insertAdjacentHTML("afterbegin",'\n        <div class="loading-box">\n            <span class="loading-box__dot"></span>\n            <span class="loading-box__dot"></span>\n            <span class="loading-box__dot"></span>\n        </div>\n        ')}removeButtonLoading(){const t=this.loadMore.querySelector(".loading-box");t&&t.remove()}loadJobs(){if(!this.loading)return new Promise(((t,e)=>{this.loading=!0,this.createButtonLoading(),this.jobsListContainer.classList.add("jobs-list--unload"),fetch(jobsDataURL).then((i=>{i.ok||(this.removeButtonLoading(),e()),i.json().then((e=>{this.jobs||(this.jobs=[]);let i=0;for(let t of e){this.jobs.find((e=>e.id===t.id))||i>=this.maxJobsOnLoad||(this.jobs.push(t),i++)}t()}))}))})).then((()=>{this.renderJobs(),this.removeButtonLoading(),setTimeout((()=>this.loading=!1),250),setTimeout((()=>{this.jobsListContainer.querySelector("li")&&this.jobsListContainer.classList.remove("jobs-list--unload")}),1e3)}))}renderJobs(){this.jobs.forEach((t=>{if(this.jobsRendered.find((e=>e===t.id)))return;const e=new JobDetailListItem(t);e.render().then((()=>{const i=e.rootElem;this.jobsListContainer.append(i),this.jobsRendered.push(t.id);Object.values(inittedInputs).find((t=>t.rootElem===i))||inittedInputs.push(e)}))}))}onJobsSearchSubmit(t){t.preventDefault(),this.getFilterInputs(),this.checkedFilterInputs=this.filterInputs.filter((t=>t.checked&&!t.classList.contains("__no-count"))),this.createdTags.forEach((t=>{!this.checkedFilterInputs.find((e=>e.value===t.value&&e.name===t.name))&&this.removeTag(null,t.tag,!0)})),this.checkedFilterInputs.forEach((t=>{const e=t.value,i=t.name;this.createTag(e,i)})),this.checkedFilterInputs.length<1&&this.companySearch.value.length<1&&this.locationSearch.value.length<1||(this.setTitleText(),this.alarmDisruptorPill&&this.alarmDisruptorPill.classList.remove("__removed"),this.isRenderedAlarmDisruptor||this.renderAlarmDisruptor())}setTitleText(){const t=this.companySearch.value.trim(),e=this.locationSearch.value.trim(),i=this.radiusInputs.find((t=>t.checked));if(!t&&!e&&!i&&this.checkedFilterInputs.length<1)this.title.innerHTML="Текущие вакансии";else if(t||e||i){const s=`Вакансии ${t||""} ${e?"в г.":""} ${e||""}`;i||(this.title.innerHTML=s),i&&(this.title.innerHTML=`${s} ${i.value?"в радиусе":""} \n                ${i.value?`<span class="jobs-search-list__title--bigger-text">${i.value.replace("км","")}</span> км`:""}`)}else this.title.innerHTML="<span class='jobs-search-list__title--bigger-text'>2</span> вакансии"}createTag(t,e){if(this.createdTags.find((i=>i.value===t&&i.name===e)))return;const i=createElement("li","jobs-filter-buttons__tag-item tag");i.dataset.inputName=e;const s=`\n            <div class="tag__text __no-hover">${t}</div>\n            <button class="tag__close icon-close"></button>\n        `;i.insertAdjacentHTML("afterbegin",s);i.querySelector(".tag__close").addEventListener("click",this.removeTag),this.createdTags.push({value:t,name:e,tag:i}),this.tagsList.append(i)}removeTag(t,e=null,i=!1){!e&&t.target&&(e=t.target.closest(".jobs-filter-buttons__tag-item")),e.remove(),t&&t.target&&t.target.removeEventListener("click",this.removeTag);const s=e.querySelector(".tag__text").innerHTML,a=e.dataset.inputName;function n(t){const e=Array.from(document.querySelectorAll(`input[name="${t.name}"]`)).find((t=>t.classList.contains("__no-count")));e&&(t.checked=!1,e.checked=!0,e.dispatchEvent(new Event("change")),t.dispatchEvent(new Event("checked")))}function o(t){t.checked=!1,t.dispatchEvent(new Event("change"))}this.createdTags=this.createdTags.filter((t=>t.value!==s||t.name!==a)),i||Array.from(document.querySelectorAll(`input[name="${a}"]`)).filter((t=>t.value==s)).forEach((t=>{"radio"==t.getAttribute("type")&&n.call(this,t),"checkbox"==t.getAttribute("type")&&o.call(this,t),setTimeout((()=>this.jobsSearchForm.dispatchEvent(new Event("submit"))),100)}))}renderAlarmDisruptor(){this.jobsListContainer.insertAdjacentHTML("beforeend",'\n        <li class="jobs-list__item jobs-list__alarm-disruptor alarm-disruptor">\n            <div class="alarm-disruptor__inner alarm-disruptor__inner--inline">\n                <div class="alarm-disruptor__image">\n                    <img src="../img/icons/notify-bell.svg" alt="Колокольчик">\n                </div>\n                <h3 class="alarm-disruptor__headline">\n                    <p>Мы подберем вакансии по выбранным позициям</p>\n                    <p>Отправить запрос?</p>\n                </h3>\n                <form novalidate class="alarm-disruptor__form">\n                    <button class="alarm-disruptor__submit-button button" type="button">\n                        Получать уведомления о вакансиях\n                    </button>\n                    <div class="alarm-disruptor__no-spam-text">\n                        Вы получите только уведомления о вакансиях - ничего больше!\n                    </div>\n                </form>\n            </div>\n        </li>\n        '),this.isRenderedAlarmDisruptor=!0}changeInfoBoxLink(t){if(t.doRemove)return void this.infoBox.classList.add("__removed");const e=this.infoBox.querySelector(".jobs-search-list__info-box-link");e&&e.setAttribute("href",`${rootPath}jobs/${t.jobId}/`),this.infoBox.classList.remove("__removed")}}class JobDetailListItem{constructor(t){this.init=this.init.bind(this),this.showLogo=this.showLogo.bind(this),this.jobData=t}init(){this.jobId=this.rootElem.dataset.jobId,this.imageLink=this.rootElem.querySelector(".jobs-list__item-image-link"),this.setLinksId(),this.rootElem.addEventListener("click",jobDetailState.defineState.bind(jobDetailState)),this.imageLink.addEventListener("click",this.showLogo)}render(){return t=t.bind(this),new Promise((e=>{loadAndGetIcon(this.jobData.iconURL).then((e=>{this.rootElem=createElement("li","jobs-list__item"),this.rootElem.dataset.jobId=this.jobData.id;const i=`\n                <div class="jobs-list__item-container">\n                    <a class="jobs-list__item-image-container" href="#">\n                        <span class="jobs-list__item-image-link">\n                            ${e}\n                        </span>\n                    </a>\n                    <div class="jobs-list__item-data-container">\n                        <h2 class="jobs-list__title">\n                            <a class="jobs-list__title-link link" href="#">\n                                ${this.jobData.title}\n                            </a>\n                        </h2>\n                        <div class="jobs-list__meta">\n                            <div class="jobs-list__item-company">\n                                <a class="jobs-list__item-company-name"\n                                    data-employer-title="${this.jobData.employer}"\n                                    href="${this.jobData.url}"\n                                    target="_blank">\n                                    ${this.jobData.employer}\n                                </a>\n                            </div>\n                            <div class="jobs-list__item-wrap">\n                            <ul class="jobs-list__locations">\n                                ${t()}\n                            </ul>\n                            <a class="jobs-list__item-date link" href="#">\n                                ${this.jobData.date}\n                            </a>\n                            </div>\n                        </div>\n                        <p class="jobs-list__snippet">\n                            <a href="#">\n                                ${this.jobData.description}\n                            </a>\n                        </p>\n                        <div class="jobs-list__user-action-container">\n                            <div class="jobs-list__watch-list">\n                                <button class="jobs-list__user-button icon-star"\n                                    data-changing-button="classList='icon-star:-icon-star-full', contentContainer='.jobs-list__user-button-text', content='В избранное:-В избранном'">\n                                    <span class="jobs-list__user-button-text">\n                                        В избранное\n                                    </span>\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                `;this.rootElem.insertAdjacentHTML("afterbegin",i),this.renderEmployerPills(),this.init(),jobDetailState.defineState()})).finally(e)}));function t(){const t='<a class="jobs-list__location-link link" href="#">[[]]</a>',e='\n                <li class="jobs-list__location">[[]]</li>\n            ';let i="";return this.jobData.locations.forEach(((s,a,n)=>{const o=s.districts,r=t.replace("[[]]",s.city)+",";if(i+=e.replace("[[]]",r),Array.isArray(o))o.forEach(((s,r)=>{let l=t.replace("[[]]",s);r===o.length-1?l+=" район":l+=",",r>0&&r===o.length-1&&(l+="ы"),a<n.length-1&&(l+=";"),i+=e.replace("[[]]",l)}));else{let e=t.replace("[[]]",s.districts);a<n.length-1&&(e+=";"),i+=t.replace("[[]]",e)}})),i}}renderEmployerPills(){loadData(`${rootPath}json/employers.json`).then((t=>{const e=t.find((t=>t.id===this.jobData.employerId));if(!e.video&&!e.employer)return;const i=this.rootElem.querySelector(".jobs-list__item-image-container"),s=createElement("span","small-pill small-pill--m-top small-pill--full");if(e.employer){let t=s.cloneNode();t.insertAdjacentText("afterbegin","ЕСТЬ ОПИСАНИЕ"),i.append(t)}if(e.video){let t=s.cloneNode();t.classList.add("small-pill--dark"),t.insertAdjacentText("afterbegin","ВИДЕО"),i.append(t)}}))}setLinksId(){this.rootElem.querySelectorAll("a").forEach((t=>{"#"==t.getAttribute("href")&&(t.href=`#${this.jobId}`)}))}setState(){window.location.hash.replace("#","")==this.jobId?this.rootElem.classList.add("__active"):this.rootElem.classList.remove("__active")}showLogo(t){t.stopPropagation(),t.preventDefault();new JobLogoModal(this.jobData.employerId).createBasicModal()}}class AlarmDisruptorListItem{constructor(t){this.onAlarmSubmit=this.onAlarmSubmit.bind(this),this.rootElem=observeNodeBeforeInit(t),this.elemInner=this.rootElem.querySelector(".alarm-disruptor__inner"),this.init()}init(){this.submitButton=this.rootElem.querySelector(".alarm-disruptor__submit-button"),this.submitButton.addEventListener("click",this.onAlarmSubmit),this.submitButton.addEventListener("click",this.dispatchAlarmPillSubmit)}onAlarmSubmit(){this.elemOriginHTML=this.elemInner.innerHTML,setTimeout((()=>{this.elemInner.innerHTML='\n            <div class="alarm-disruptor__image">\n                <img src="../img/icons/phone-notify.jpg" alt="Уведомление на телефон">\n            </div>\n            <h3 class="alarm-disruptor__headline">\n                <p>Новые вакансии, подходящие по запросам вашего поиска, будут отправлены на ваш E-Mail адрес.</p>\n            </h3>\n        '}),100)}dispatchAlarmPillSubmit(){inittedInputs.filter((t=>t instanceof AlarmDisruptorPill)).forEach((t=>t.submitAlarm.call(this)))}onAlarmCancel(){this.elemInner.innerHTML=this.elemOriginHTML,this.init()}}class AlarmDisruptorPill{constructor(t){this.toggleBox=this.toggleBox.bind(this),this.submitAlarm=this.submitAlarm.bind(this),this.createAlarmEditModal=this.createAlarmEditModal.bind(this),this.setParamsAutocomplete=this.setParamsAutocomplete.bind(this),this.rootElem=observeNodeBeforeInit(t),this.btnShow=this.rootElem.querySelector(".alarm-disruptor-pill__button"),this.btnText=this.btnShow.querySelector(".alarm-disruptor-pill__text"),this.box=this.rootElem.querySelector(".alarm-disruptor-pill__box"),this.btnSubmit=this.rootElem.querySelector(".alarm-disruptor-pill__submit"),this.btnClose=this.rootElem.querySelector(".alarm-disruptor-pill__close"),this.alarmForm=this.rootElem.querySelector(".alarm-disruptor-pill__form"),this.jobsSearchForm=document.querySelector("#jobs-search-form"),this.btnShow.addEventListener("click",this.toggleBox),this.btnClose.addEventListener("click",this.toggleBox),this.btnSubmit.addEventListener("click",this.submitAlarm)}toggleBox(){this.box.classList.contains("__removed")?(this.box.classList.remove("__removed"),this.btnShow.classList.add("__removed")):(this.box.classList.add("__removed"),this.btnShow.classList.remove("__removed"))}submitAlarm(){const t=Array.from(this.rootElem.querySelectorAll("input"));this.getCheckedAlarmValues(),t.find((t=>t.checked))&&(this.btnTextOrigin=this.btnText.innerHTML,this.btnText.innerHTML="Изменить настройки оповещений",this.btnText.className=this.btnText.className.replace("icon-bell","icon-pencil"),this.box.classList.add("__removed"),this.btnShow.classList.remove("__removed"),this.btnShow.removeEventListener("click",this.toggleBox),this.btnShow.addEventListener("click",this.createAlarmEditModal),snackbar.create({text:"Оповещение о вакансиях создано"})),this.alarmDisruptorListItems=inittedInputs.filter((t=>t instanceof AlarmDisruptorListItem)),this.alarmDisruptorListItems.forEach((t=>t.onAlarmSubmit()))}cancelAlarm(){this.btnText.innerHTML=this.btnTextOrigin,this.btnText.className=this.btnText.className.replace("icon-pencil","icon-bell"),this.btnShow.addEventListener("click",this.toggleBox),this.btnShow.removeEventListener("click",this.createAlarmEditModal),snackbar.create({text:"Оповещение о вакансиях отменено"}),Array.isArray(this.alarmDisruptorListItems)&&this.alarmDisruptorListItems.forEach((t=>t.onAlarmCancel()))}getCheckedAlarmValues(){const t=this.jobsSearchForm.querySelector("#keywords"),e=this.jobsSearchForm.querySelector("#locations"),i=Array.from(this.jobsSearchForm.querySelectorAll("[name='proximity-radius']")).find((t=>t.checked));this.searchFormValues={},t&&(this.searchFormValues.keywords=t.value),e&&(this.searchFormValues.location=e.value),i&&(this.searchFormValues.radius=i.value),this.checkedFilters=Array.from(this.jobsSearchForm.querySelectorAll("input")).filter((t=>t.checked)),this.alarmPeriod=this.alarmForm.querySelector("input:checked")}createAlarmEditModal(){n=n.bind(this),o=o.bind(this);const t=createElement("div","jobs-search-form jobs-search-form--min"),e=`\n            <div class="text-input jobs-search-form__search-input" role="combobox"\n            aria-expanded="false">\n                <span class="text-input__icon-label icon-search"></span>\n                <button class="text-input__close-icon icon-close"></button>\n                <input type="text" name="keywords" id="alarm-params_keywords"\n                    class="text-input__input text-input__wrapper" role="searchbox"\n                    aria-haspopup="listbox" aria-controls="keywords-autocomplete" spellcheck="false"\n                    autocapitalize="off" autocomplete="off" placeholder="Профессия, компания"\n                    ${this.searchFormValues.keywords?"value='"+this.searchFormValues.keywords+"'":""}>\n                <ul class="text-input__autocomplete autocomplete __removed" id="alarm-params_keywords-autocomplete"\n                    role="listbox" aria-label="Автозаполнение">\n                    <li class="autocomplete__item" role="option">\n                        <span class="autocomplete__item-regular">Эл</span>\n                        <span>емент</span>\n                    </li>\n                    <li class="autocomplete__item" role="option">\n                        <span class="autocomplete__item-regular">Эл</span>\n                        <span>емент2</span>\n                    </li>\n                    <li class="autocomplete__item" role="option">\n                        <span class="autocomplete__item-regular">Эл</span>\n                        <span>емент312321321</span>\n                    </li>\n                </ul>\n            </div>\n            <div class="jobs-search-form__proximity-container">\n                <div class="text-input jobs-search-form__location-input">\n                    <span class="text-input__icon-label icon-location"></span>\n                    <button class="text-input__close-icon icon-close"></button>\n                    <input type="text" name="locations" id="alarm-params_locations"\n                        class="text-input__input text-input__wrapper"\n                        placeholder="Регион, населенный пункт" \n                        ${this.searchFormValues.location?"value='"+this.searchFormValues.location+"'":""}>\n                </div>\n                <div class="jobs-search-form__proximity">\n                    <div class="dropdown dropdown--with-input">\n                        <button class="dropdown__button icon-chevron-down" type="button"\n                            data-require-user="button">\n                            <span class="dropdown__text">Радиус</span>\n                        </button>\n                        <ul class="dropdown__list">\n                            <li class="dropdown__option">\n                                <label class="dropdown__label">\n                                    <input type="radio" name="proximity-radius" value="0 км" id="alarm-params_proximity-radius-1">\n                                    0 км\n                                </label>\n                            </li>\n                            <li class="dropdown__option">\n                                <label class="dropdown__label">\n                                    <input type="radio" name="proximity-radius" value="50 км" id="alarm-params_proximity-radius-2">\n                                    50 км\n                                </label>\n                            </li>\n                            <li class="dropdown__option">\n                                <label class="dropdown__label">\n                                    <input type="radio" name="proximity-radius" value="100 км" id="alarm-params_proximity-radius-3">\n                                    100 км\n                                </label>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n            `;t.insertAdjacentHTML("afterbegin",e),t.insertAdjacentHTML("beforeend",'\n            <div class="jobs-search-form__filter jobs-filter" data-filter-nameprefix="alarm-params_">\n                <div class="jobs-filter__container">\n                    <div class="jobs-filter__inner">\n                        <div class="jobs-filter__groups">\n                            <div class="jobs-filter__dropdown spoiler"\n                                data-jobfilter-name="professional-area">\n                                <button\n                                    class="jobs-filter__group-button headline-m spoiler__button icon-chevron-down"\n                                    aria-label="Фильтр по профессиональным областям" type="button">\n                                    <span class="jobs-filter__group-button-text">\n                                        Профессиональные области\n                                    </span>\n                                </button>\n                                <ul class="jobs-filter__group-list spoiler__hideable"></ul>\n                            </div>\n                            <div class="jobs-filter__dropdown spoiler"\n                                data-jobfilter-name="employment-type">\n                                <button\n                                    class="jobs-filter__group-button headline-m spoiler__button icon-chevron-down"\n                                    aria-label="Фильтр по типу занятости" type="button">\n                                    <span class="jobs-filter__group-button-text">\n                                        Тип занятости\n                                    </span>\n                                </button>\n                                <ul class="jobs-filter__group-list spoiler__hideable"></ul>\n                            </div>\n                            <div class="jobs-filter__dropdown spoiler"\n                                data-jobfilter-name="work-experience">\n                                <button\n                                    class="jobs-filter__group-button headline-m spoiler__button icon-chevron-down"\n                                    aria-label="Фильтр по опыту" type="button">\n                                    <span class="jobs-filter__group-button-text">\n                                        Опыт работы\n                                    </span>\n                                </button>\n                                <ul class="jobs-filter__group-list spoiler__hideable"></ul>\n                            </div>\n                            <div class="jobs-filter__dropdown spoiler"\n                                data-click-closable="0 false, 720 true" data-jobfilter-name="salary">\n                                <button\n                                    class="jobs-filter__group-button headline-m spoiler__button icon-chevron-down"\n                                    aria-label="Фильтр по заработной плате" type="button"\n                                    data-require-user="button-close-icon, signup">\n                                    <span class="jobs-filter__group-button-text">\n                                        Заработная плата\n                                    </span>\n                                </button>\n                                <ul class="jobs-filter__group-list spoiler__hideable"></ul>\n                            </div>\n                            <div class="jobs-filter__groups-checkbox checkbox" data-jobfilter-name="homeoffice"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            ');const i=createElement("div","alarm-box-info");i.insertAdjacentHTML("beforeend",'\n        <div class="jobs-search__alarm-disruptor__pill alarm-disruptor-pill alarm-disruptor-pill--noinit"\n        data-require-user="render">\n            <p class="alarm-disruptor-pill__box-headline">\n                Как часто мы должны сообщать Вам о новых вакансиях по этому поиску?\n            </p>\n            <div class="alarm-disruptor-pill__form">\n                <div class="alarm-disruptor-pill__choice">\n                    <div class="alarm-disruptor-pill__radio-group radio-group">\n                        <input class="radio-group__input" id="alarm-params_vacancy-notification-1"\n                            name="vacancy-notification" type="radio" checked>\n                        <label class="radio-group__label" for="alarm-params_vacancy-notification-1">\n                            Раз в день\n                        </label>\n                        <input class="radio-group__input" name="vacancy-notification"\n                            id="alarm-params_vacancy-notification-2" type="radio">\n                        <label class="radio-group__label" for="alarm-params_vacancy-notification-2">\n                            Раз в неделю\n                        </label>\n                        <input class="radio-group__input" id="alarm-params_vacancy-notification-3"\n                            name="vacancy-notification" type="radio">\n                        <label class="radio-group__label" for="alarm-params_vacancy-notification-3">\n                            Не присылать\n                        </label>\n                    </div>\n                </div>\n            </div>\n        </div>\n        ');const s={bodyContent:`${t.outerHTML}${i.outerHTML}`,titleText:"Изменение настроек оповещений",applyButtonText:"Сохранить изменения",removeButtonText:"Отменить отправку оповещений"},a={applyBtnHandler:n,removeBtnHandler:o};function n(){snackbar.create({text:"Настройки оповещений изменены"}),this.searchBoxInputs.forEach((t=>{if(!t)return;const e=this.jobsSearchForm.querySelector(`[name*="${t.name}"]`);e&&("text"===t.type&&(e.value=t.value,t.dispatchEvent(new Event("input"))),"radio"!==t.type&&"checkbox"!==t.type||(e.checked=t.checked),t.dispatchEvent(new Event("change")))})),this.jobsSearchForm.dispatchEvent(new Event("submit")),this.paramsModal.removeModal()}function o(){this.cancelAlarm(),this.paramsModal.removeModal()}this.paramsModal=new FormModal(s,a),this.paramsModal.applyBtn.setAttribute("disabled",""),document.addEventListener("filterRendered",(()=>{setTimeout((()=>{this.setParamsAutocomplete(),this.searchBoxInputs=[this.paramsModal.content.querySelector("[name='keywords']"),this.paramsModal.content.querySelector("[name='locations']"),this.paramsModal.content.querySelector("[name='proximity-radius']")],setTimeout((()=>this.initModalApplyBtnCheck()),100)}),0)}))}initModalApplyBtnCheck(){n=n.bind(this);const t=this.paramsModal.applyBtn,e=this.paramsModal.content.closest("form"),i=Array.from(this.paramsModal.content.querySelectorAll("input")).filter((t=>t.checked)),s=this.searchBoxInputs[0].value,a=this.searchBoxInputs[1].value;n(),e.addEventListener("change",n);for(let t=0;t<2;t++)this.searchBoxInputs[t].addEventListener("input",n);function n(){const e=Array.from(this.paramsModal.content.querySelectorAll("input")).filter((t=>t.checked));let n=!1;for(let t of e)if(!i.includes(t)){n=!0;break}this.searchBoxInputs[0].value!==s&&(n=!0),this.searchBoxInputs[1].value!==a&&(n=!0),n?t.removeAttribute("disabled"):t.setAttribute("disabled","")}}setParamsAutocomplete(){const t=new Event("change");if(this.searchFormValues.radius){const e=this.paramsModal.content.querySelector(`input[value="${this.searchFormValues.radius}"]`);e&&(e.checked=!0,e.dispatchEvent(t))}if(this.checkedFilters.forEach((e=>{const i=e.getAttribute("id"),s=this.paramsModal.content.querySelector(`[id*="${i}"]`);s&&(s.checked=!0,s.dispatchEvent(t))})),this.alarmPeriod){const e=this.alarmPeriod.getAttribute("id"),i=this.paramsModal.content.querySelector(`[id*="${e}"]`);i.checked=!0,i.dispatchEvent(t)}}}class JobDetail{constructor(t){this.onContainerScroll=this.onContainerScroll.bind(this),this.removeLoadingOverlay=this.removeLoadingOverlay.bind(this),this.createLoadingOverlay=this.createLoadingOverlay.bind(this),this.onTabBarClick=this.onTabBarClick.bind(this),this.rootElem=observeNodeBeforeInit(t),this.isEmbedded=this.rootElem.querySelector(".job-detail--embedded"),this.jobDetail=this.rootElem.querySelector(".job-detail"),this.container=this.rootElem.querySelector(".job-detail__container"),this.noHideHeaderMedia=window.matchMedia("(min-width: 720px)"),this.loadingOverlay=this.rootElem.querySelector(".jobs-detail-wrapper__loading"),this.loadingOverlay&&this.loadingOverlay.classList.add("__removed"),this.isEmbedded?(this.closeContainer=this.rootElem.querySelector(".job-detail__close"),this.closeButton=this.closeContainer.querySelector(".job-detail__close-button"),this.emptyState=this.rootElem.querySelector(".job-empty-state"),this.container.addEventListener("scroll",this.onContainerScroll)):(this.setShowState(),window.addEventListener("scroll",this.onContainerScroll)),this.closeButton&&this.closeButton.addEventListener("click",(()=>{jobDetailState.setHideState(),window.location.href=window.location.href.replace(/#.*/,"#")}))}getJobId(){if(this.isEmbedded)this.jobId=window.location.hash.replace("#","");else{const t=window.location.pathname.match(/\/\d+\//g)[0].replace(/\//g,"");this.jobId=t}}createLoadingOverlay(){if(this.loadingOverlay.classList.remove("__removed"),this.loadingOverlay.querySelector(".loading-overlay__dot"))return;this.loadingOverlay.insertAdjacentHTML("afterbegin",'\n        <div class="loading-overlay__ellipsis">\n            <span class="loading-overlay__dot"></span>\n            <span class="loading-overlay__dot"></span>\n            <span class="loading-overlay__dot"></span>\n        </div>')}removeLoadingOverlay(){this.loadingOverlay.classList.add("__removed"),this.loadingOverlay.innerHTML=""}setShowState(){this.jobDetail.classList.add("job-detail--shown"),this.emptyState&&this.emptyState.classList.add("__removed"),this.getJobId(),this.renderJobDetail(),this.closeContainer&&this.closeContainer.style.removeProperty("top")}renderJobDetail(){function t(t){if(!Array.isArray(t))return;if(!(t=t.find((t=>t.id===this.jobId))))return;this.contentTemplate=`\n            <div class="job-detail__content">\n                <div class="job-header ${this.isEmbedded?"job-header-m":""}">\n                    <div class="job-header__inner">\n                        <div class="job-header__info">\n                            <h1 class="job-header__job-title ${this.isEmbedded?"":"job-header__job-title--min"}">\n                                ${t.title}\n                            </h1>\n                            <ul class="job-header__meta-list custom-scrollbar">\n                                <li class="job-header__meta-item icon-building-with-tree">\n                                    <a class="job-header__company-link link" href="${t.url}">\n                                        ${t.employer}\n                                    </a>\n                                </li>\n                                <li class="job-header__meta-item icon-location">\n                                    ${function(){const e='<a class="job-header__company-link link" href="#">[[]]</a>';let i="";return t.locations.forEach(((t,s,a)=>{const n=t.districts;if(i+=e.replace("[[]]",t.city+", "),Array.isArray(n))n.forEach(((t,o)=>{let r=t;o<n.length-1&&(r+=", "),i+=e.replace("[[]]",r),o===n.length-1&&(i+=" район",o>0&&(i+="ы")),o===n.length-1&&s<a.length-1&&(i+=";")}));else{let t=n;s<a.length-1&&(t+=";"),i+=e.replace("[[]]",t)}})),i}()}\n                                </li>\n                                <li class="job-header__meta-item icon-clock-arrow">\n                                    ${arrayToString(t["employment-type"])}\n                                </li>\n                                <li class="job-header__meta-item icon-portfolio">\n                                    ${t.expierence}\n                                </li>\n                                <li class="job-header__meta-item icon-calendar-empty">\n                                    <a class="job-header__company-link link" href="${t.url}">\n                                        ${t.date}\n                                    </a>\n                                </li>\n                            </ul>\n                        </div>\n                        <div class="job-header__actions">\n                            <div class="job-header__action job-header__print ">\n                                <button class="job-header__button button  button--transparent icon-printer"\n                                    aria-label="Распечатать вакансию"></button>\n                            </div>\n                            <div class="job-header__action job-header__share">\n                                <button class="job-header__button button button--transparent icon-share icon--margin"\n                                    aria-label="Поделиться вакансией" data-show-more=".share-modal"\n                                    data-click-closable="0 true">Поделиться</button>\n                                <div class="share-modal">\n                                    <div class="share-modal__overlay" data-show-more=".share-modal"></div>\n                                    <div class="share-modal__content">\n                                        <div class="share-modal__close-container">\n                                            <span class="share-modal__headline">\n                                                Поделиться вакансией\n                                            </span>\n                                            <button class="share-modal__close icon-close"\n                                                aria-label="Скрыть окно с предложением поделиться"\n                                                data-show-more=".share-modal"></button>\n                                        </div>\n                                        <div class="share-modal__share-container">\n                                            <div class="share-modal__link share-link icon-link-share">\n                                                <input type="text" disabled class="share-link__input" value="https://job1.ru">\n                                            </div>\n                                            <button class="share-modal__copy-button button button--transparent">\n                                                Скопировать ссылку\n                                            </button>\n                                            <ul class="share-modal__options">\n                                                <li class="share-modal__option-item">\n                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17.61 18">\n                                                        <path fill="currentColor"\n                                                            d="M15.16 3.73H2.45c-.8 0-1.45.67-1.45 1.5v7.98c0 .83.65 1.5 1.45 1.5h12.7c.8 0 1.45-.67 1.45-1.5V5.23c.01-.83-.64-1.5-1.44-1.5zM2 5.39L5.99 8.8 2 12.95V5.39zm6.81 4.5L2.77 4.73h12.07L8.81 9.89zm-2.06-.44l1.73 1.48a.49.49 0 0 0 .64 0l1.73-1.48 4.09 4.26H2.66l4.09-4.26zm4.88-.66l3.99-3.41v7.56l-3.99-4.15z">\n                                                        </path>\n                                                    </svg>\n                                                    <a class="share-modal__option-link" href="#">Отправить по E-Mail</a>\n                                                </li>\n                                                <li class="share-modal__option-item">\n                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="115.029 58.1333 155.9 268.8">\n                                                        <path d="M 189.00,58.42\n                                                                C 196.54,57.51 206.72,58.87 214.00,61.04\n                                                                263.59,75.76 280.01,137.11 245.27,174.91\n                                                                240.01,180.64 232.97,186.14 226.00,189.63\n                                                                214.95,195.16 204.25,197.14 192.00,197.00\n                                                                140.94,196.40 109.95,140.63 132.27,96.00\n                                                                140.41,79.73 155.53,66.72 173.00,61.44\n                                                                179.90,59.35 182.28,59.40 189.00,58.42 Z\n                                                                M 193.00,98.32\n                                                                C 184.45,99.49 178.27,101.18 172.33,108.04\n                                                                156.29,126.53 167.80,155.44 193.00,156.91\n                                                                225.14,158.78 235.30,113.47 206.00,100.88\n                                                                201.90,99.12 197.44,98.23 193.00,98.32 Z\n                                                                M 169.00,253.00\n                                                                C 154.80,249.23 129.28,242.11 119.53,230.82\n                                                                108.77,218.35 118.64,198.95 135.00,200.10\n                                                                141.62,200.56 150.38,207.12 157.00,210.22\n                                                                166.27,214.57 180.76,217.88 191.00,218.00\n                                                                205.25,218.16 216.94,215.70 230.00,210.00\n                                                                238.33,206.36 244.27,199.42 254.00,200.10\n                                                                264.66,200.84 271.63,209.51 270.90,220.00\n                                                                270.32,228.37 265.75,232.73 259.00,236.94\n                                                                249.25,243.00 230.45,251.44 219.00,252.00\n                                                                223.76,258.65 243.92,277.92 251.00,285.00\n                                                                255.42,289.42 263.18,296.18 265.15,302.00\n                                                                270.41,317.57 255.07,331.79 240.00,325.03\n                                                                235.25,322.90 231.81,318.61 228.00,315.17\n                                                                228.00,315.17 207.00,295.00 207.00,295.00\n                                                                204.65,292.65 196.81,283.99 194.00,283.62\n                                                                190.29,283.13 183.64,292.28 180.99,295.00\n                                                                180.99,295.00 159.00,318.00 159.00,318.00\n                                                                153.91,323.02 148.70,327.56 141.00,326.80\n                                                                130.93,325.81 123.39,317.13 124.10,307.00\n                                                                124.75,297.58 131.00,293.34 136.91,287.00\n                                                                136.91,287.00 158.91,264.00 158.91,264.00\n                                                                158.91,264.00 169.00,253.00 169.00,253.00 Z" fill="#f7931e" />\n                                                    </svg>\n                                                    <a class="share-modal__option-link" href="#">Отправить через ОК</a>\n                                                </li>\n                                                <li class="share-modal__option-item">\n                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="92.2132 145.6 263.9 156.8">\n                                                        <path\n                                                            d="M 97.3 145.999 C 97.3 145.999 128.8 145.6 128.8 145.6 C 131.425 145.607 134.057 145.509 136.493 146.699 C 141.925 149.359 144.48 159.677 146.524 165.2 C 151.935 179.837 162.47 201.495 171.304 214.2 C 175.196 219.8 181.342 228.13 186.9 231.945 C 191.268 234.941 195.37 233.527 196.623 228.2 C 196.735 226.856 196.7 224.714 196.623 223.3 C 196.623 223.3 196.623 181.3 196.623 181.3 C 196.693 175.49 195.524 169.512 192.451 164.5 C 190.036 160.559 184.94 155.995 185.668 151.2 C 186.48 145.831 190.974 145.607 195.3 145.6 C 195.3 145.6 235.9 145.6 235.9 145.6 C 245.301 145.614 246.295 149.492 246.491 158.2 C 246.491 158.2 246.491 211.4 246.491 211.4 C 246.4 212.863 246.351 214.907 246.491 216.3 C 247.688 220.682 250.635 222.523 254.8 220.5 C 258.51 218.694 265.041 211.862 267.792 208.6 C 278.887 195.447 288.274 177.807 295.925 162.4 C 300.349 153.496 300.909 145.747 312.9 145.6 C 312.9 145.6 341.6 145.6 341.6 145.6 C 343.007 145.621 344.442 145.621 345.8 146.055 C 355.334 149.086 348.075 162.386 345.275 168 C 337.673 183.197 328.377 197.281 318.969 211.4 C 316.421 215.215 308.343 225.554 308.602 229.6 C 308.917 234.619 318.395 242.795 322 246.4 C 331.513 255.913 343.854 270.151 351.162 281.4 C 355.152 287.553 360.451 298.809 350 301.847 C 348.243 302.358 346.892 302.379 345.1 302.4 C 345.1 302.4 317.8 302.4 317.8 302.4 C 307.118 302.274 303.373 296.31 296.744 289.1 C 287.658 279.223 278.488 268.835 267.4 261.128 C 262.507 257.726 250.348 250.88 246.918 259.7 C 246.309 261.268 246.4 263.613 246.4 265.3 C 246.4 265.3 246.4 287.7 246.4 287.7 C 246.393 290.668 246.414 294.119 244.902 296.786 C 242.144 301.679 233.996 302.337 228.9 302.4 C 202.265 302.708 179.445 292.306 159.6 274.897 C 146.293 263.228 136.08 248.654 126.665 233.8 C 115.43 216.09 107.478 201.516 99.68 182 C 96.929 175.119 93.562 165.445 92.344 158.2 C 91.392 152.544 95.9 148.4 97.3 145.999 Z"\n                                                            fill="#5181b8" />\n                                                    </svg>\n                                                    <a class="share-modal__option-link" href="#">Отправить через ВК</a>\n                                                </li>\n                                            </ul>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="job-header__action job-header__watchlist">\n                                <button\n                                    data-changing-button="classList='icon-star:-icon-star-full', contentContainer='.jobs-list__user-button-text', content='В избранное:-В избранном'"\n                                    class="job-header__button button button--transparent icon-star icon--margin">\n                                    В избранное\n                                </button>\n                            </div>\n                            <div class="job-header__action job-header__watchlist">\n                                <button class="job-header__button button">\n                                    Откликнуться\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="job-detail__tab-bar">\n                    <div class="job-detail__tab-bar-inner">\n                        <ul class="job-detail__tab-bar-list">\n                            <li class="job-detail__tab-bar-item">\n                                <button class="job-detail__tab-bar-button" aria-label="Показать информацию о вакансии"\n                                    data-tabbar-job="job">\n                                    Вакансия\n                                </button>\n                            </li>\n                            <li class="job-detail__tab-bar-item">\n                                <button class="job-detail__tab-bar-button" aria-label="Показать информацию о работодателе"\n                                    data-tabbar-job="employer">\n                                    О работодателе\n                                </button>\n                            </li>\n                        </ul>\n                        <button class="job-detail__tab-bar-print icon-printer" aria-label="Распечатать вакансию">\n                            Распечатать\n                        </button>\n                    </div>\n                </div>\n                <div class="job-content"></div>\n            </div>\n            `,this.container.innerHTML="",this.container.insertAdjacentHTML("afterbegin",this.contentTemplate),this.jobData=t,this.header=this.rootElem.querySelector(".job-header"),this.jobContent=this.container.querySelector(".job-content"),this.initTabBarButtons(),this.onContainerScroll();const e=window.matchMedia("(min-width: 1248px)");function i(){e.matches&&(e.removeEventListener("change",i),this.renderLogo())}!this.isEmbedded&&e.matches?this.renderLogo():this.isEmbedded||(i=i.bind(this),e.addEventListener("change",i))}t=t.bind(this),this.drawingContent=!0,this.createLoadingOverlay(),loadData(jobsDataURL).then(t).finally(this.removeLoadingOverlay)}renderJobContent(){s=s.bind(this),this.iframe&&this.iframe.remove(),this.iframe=createElement("iframe","job-content__iframe"),this.iframe.scrolling="no",this.jobContent.append(this.iframe);const t=a(this.iframe);let e=t.height,i=t.width;function s(t){const n=a(this.iframe),o=n.height,r=n.width;if(t&&o!==e&&r===i)return;const l=this.iframe.contentDocument.querySelector(".wrapper"),c=getComputedStyle(l);if(!l)return setTimeout((()=>s(t)),100);let d=0;Array.from(l.childNodes).filter((t=>3!==t.nodeType)).forEach((t=>{const e=getComputedStyle(t),i=parseInt(e.marginTop.replace(/\D/g,"")),s=parseInt(e.marginBottom.replace(/\D/g,""));d+=i+s,d+=t.offsetHeight})),d||(d=l.offsetHeight);const h=parseInt(c.paddingTop.replace(/\D/g,"")),m=parseInt(c.paddingBottom.replace(/\D/g,""));this.iframe.height=d+h+m,e=o,i=r}function a(t){return{height:t.contentDocument.clientHeight||t.contentWindow.innerHeight,width:t.contentDocument.clientWidth||t.contentWindow.innerWidth}}this.iframe.onload=()=>{const t=this.iframe;s(),setTimeout(s,1e3);const e=new MutationObserver((()=>{s(),setTimeout(s,1e3),t.closest("body")||e.disconnect()}));e.observe(this.iframe.contentDocument.body,{subtree:!0,childList:!0,attributes:!0}),this.iframe.contentWindow.addEventListener("resize",s)},this.iframe.src=`${rootPath}jobs/${this.jobId}/${this.currentTabBar}.html`}renderLogo(){if(!this.header)return;const t=this.header.querySelector(".job-header__inner");loadData(jobsDataURL).then((e=>{const i=createElement("div","job-header__logo"),s=e.find((t=>t.id===this.jobId));s&&loadData(`${rootPath}${s.iconURL}`,"text").then((e=>{i.insertAdjacentHTML("afterbegin",e),t.prepend(i)}))}))}initTabBarButtons(){this.tabBarButtons=this.container.querySelectorAll(".job-detail__tab-bar-button"),this.onTabBarClick(null,this.tabBarButtons[0]),this.tabBarButtons.forEach((t=>{t.addEventListener("click",this.onTabBarClick),"employer"===t.dataset.tabbarJob&&this.renderTabbarButtonPills(t)}))}renderTabbarButtonPills(t){loadData(`${rootPath}json/employers.json`).then((e=>{const i=e.find((t=>t.id===this.jobData.employerId));if(!i.video&&!i.employer)return;const s=createElement("span","small-pill small-pill--m-left");if(i.employer){const e=s.cloneNode();e.insertAdjacentText("afterbegin","ЕСТЬ ОПИСАНИЕ"),t.append(e)}if(i.video){const e=s.cloneNode();e.classList.add("small-pill--dark"),e.insertAdjacentText("afterbegin","ВИДЕО"),t.append(e)}}))}onTabBarClick(t,e){const i=t?t.target:e;let s=i.dataset.tabbarJob;s||(s=i.closest("[data-tabbar-job]").dataset.tabbarJob),s||(s="job"),this.tabBarButtons.forEach((t=>t.classList.remove("__active"))),i.classList.add("__active"),this.currentTabBar=s,this.renderJobContent()}onContainerScroll(){this.header&&(this.doFixHeader=this.isEmbedded?this.container.scrollTop>this.header.offsetHeight:window.pageYOffset>this.header.offsetHeight,this.doFixHeader&&!this.isHeaderFixed?(setTimeout((()=>this.header.classList.add("__sticky")),100),this.closeContainer&&this.closeContainer.classList.add("__visible")):(setTimeout((()=>this.header.classList.remove("__sticky")),100),this.closeContainer&&(this.closeContainer.classList.remove("__visible"),this.closeContainer.style.removeProperty("top")),this.header.style.removeProperty("top")),this.noHideHeaderMedia.matches||this.hideHeader(),this.scrollableElemScrollTop=this.isEmbedded?this.container.scrollTop:window.pageYOffset)}hideHeader(){if(!this.doFixHeader)return;let t=!1;t=this.isEmbedded?this.scrollableElemScrollTop<this.container.scrollTop:this.scrollableElemScrollTop<window.pageYOffset,t?(this.header.style.top="-500px",this.closeContainer&&(this.closeContainer.style.top="-500px")):(this.header.style.removeProperty("top"),this.closeContainer&&this.closeContainer.style.removeProperty("top"))}setHideState(){this.jobDetail.classList.remove("job-detail--shown"),this.emptyState&&this.emptyState.classList.remove("__removed"),this.container.innerHTML="",this.closeContainer&&setTimeout((()=>this.closeContainer.style.top="-500px"),100)}}const jobDetailsSelectors=[{selector:".alarm-disruptor-pill:not(.alarm-disruptor-pill--noinit)",classInstance:AlarmDisruptorPill},{selector:".jobs-search__listing",classInstance:JobsListing},{selector:".jobs-list__alarm-disruptor",classInstance:AlarmDisruptorListItem},{selector:".job-detail-wrapper",classInstance:JobDetail}];doInit(jobDetailsSelectors),inittingSelectors=inittingSelectors.concat(jobDetailsSelectors);