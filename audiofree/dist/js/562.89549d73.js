"use strict";(self["webpackChunkaudiofree"]=self["webpackChunkaudiofree"]||[]).push([[562],{8562:function(e,t,a){a.r(t),a.d(t,{default:function(){return ue}});var l=a(3396),s=a(7139);const r={class:"catalogue-page"},i={class:"catalogue-page__block catalogue-block"},o={class:"catalogue-block__container container"},n={class:"catalogue-block__title"},c={class:"page-title"},u={class:"page-title__links"},g=(0,l.Uk)("Главная"),p=(0,l.Uk)("Каталог"),h=(0,l._)("div",{class:"page-title__title"},"Каталог",-1),d={class:"catalogue-block__selects"},_={class:"catalogue-block__aside"},m={class:"catalogue-block__page-counter page-counter"},f={class:"page-counter__container"},v={class:"catalogue-page__block tab-spoiler tab-spoiler--colored-bg"},k=(0,l._)("div",{class:"tab-spoiler__title title"},[(0,l._)("div",{class:"title__top"},"Что стоит знать"),(0,l._)("div",{class:"title__bottom title__bold"}," при выборе наушников ")],-1),y=(0,l._)("h5",null,"Гарантия на всю продукцию - 3 месяца",-1),b=(0,l._)("p",null," Есть много вариантов Lorem Ipsum, но большинство из них имеет не всегда приемлемые модификации, например, юмористические вставки или слова, которые даже отдалённо не напоминают латынь. ",-1),x=(0,l._)("p",null," Если вам нужен Lorem Ipsum для серьёзного проекта, вы наверняка не хотите какой-нибудь шутки, скрытой в середине абзаца. ",-1),P=(0,l._)("h5",null,"Возможно подключение только одного устройства",-1),w=(0,l._)("p",null," Есть много вариантов Lorem Ipsum, но большинство из них имеет не всегда приемлемые модификации, например, юмористические вставки или слова, которые даже отдалённо не напоминают латынь. ",-1),V=(0,l._)("p",null," Если вам нужен Lorem Ipsum для серьёзного проекта, вы наверняка не хотите какой-нибудь шутки, скрытой в середине абзаца. ",-1),T=(0,l._)("p",null," Есть много вариантов Lorem Ipsum, но большинство из них имеет не всегда приемлемые модификации, например, юмористические вставки или слова, которые даже отдалённо не напоминают латынь. ",-1),M=(0,l._)("p",null," Если вам нужен Lorem Ipsum для серьёзного проекта, вы наверняка не хотите какой-нибудь шутки, скрытой в середине абзаца. ",-1),S=(0,l._)("p",null," Есть много вариантов Lorem Ipsum, но большинство из них имеет не всегда приемлемые модификации, например, юмористические вставки или слова, которые даже отдалённо не напоминают латынь. ",-1),L=(0,l._)("p",null," Если вам нужен Lorem Ipsum для серьёзного проекта, вы наверняка не хотите какой-нибудь шутки, скрытой в середине абзаца. ",-1);function C(e,t,a,C,I,$){const N=(0,l.up)("router-link"),E=(0,l.up)("select-block"),B=(0,l.up)("filter-block"),F=(0,l.up)("product-info-card"),A=(0,l.up)("router-view"),j=(0,l.up)("spoiler-tab-wrapper");return(0,l.wg)(),(0,l.iD)("main",r,[(0,l._)("section",i,[(0,l._)("div",o,[(0,l._)("div",n,[(0,l._)("div",c,[(0,l._)("div",u,[(0,l.Wm)(N,{to:"/",class:"page-title__arrow-back __icon-back-arrow"}),(0,l.Wm)(N,{to:"/",class:"page-title__link-back"},{default:(0,l.w5)((()=>[g])),_:1}),(0,l.Wm)(N,{to:"/catalogue",class:"page-title__link-back"},{default:(0,l.w5)((()=>[p])),_:1})]),h]),(0,l._)("div",d,[(0,l.Wm)(E,{inputName:"sort-type",options:[{title:"С начала (от меньшего к большему)",value:"start"},{title:"С конца (от большего к меньшему)",value:"end"}],onSelectValueChange:t[0]||(t[0]=e=>$.getSortOrder(e)),ref:"sortOrderBlock"},null,8,["options"]),(0,l.Wm)(E,{inputName:"sort-catalogue",objectToSort:I.filteredProducts,options:[{title:"По названию",value:"name"},{title:"По цене",value:"price"},{title:"По отзывам",value:"rating"}],onSortValueChange:t[1]||(t[1]=e=>$.getSortedCatalogueList(e)),ref:"sortKeysBlock"},null,8,["objectToSort"])])]),(0,l._)("div",_,[(0,l.Wm)(B,{filterBlockTitle:"Фильтр товаров",fields:[{title:"Бренд",inputsType:"checkbox",key:"brand"},{title:"Категория",inputsType:"checkbox",key:"category"},{title:"Цена",inputsType:"range",key:"price",maxRangeValue:$.calcMaxRangeValue("price"),rangeValueString:"₽"},{title:"По акции",inputsType:"checkbox",key:"sale.type"}],objectToFilter:e.products,onFilterApply:t[2]||(t[2]=e=>$.getFilteredCatalogueList(e)),ref:"filterBlock"},null,8,["fields","objectToFilter"]),(0,l.Wm)(F,{title:"Распродажа"})]),(0,l.Wm)(A,{catalogueListPage:I.catalogueListPage},null,8,["catalogueListPage"]),(0,l._)("div",m,[(0,l._)("div",f,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)($.pagesAmount,(e=>((0,l.wg)(),(0,l.j4)(N,{class:"page-counter__number",key:e,to:{name:"catalogue-list",params:{pageNumber:[e]}}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e),1)])),_:2},1032,["to"])))),128)),(0,l.Wm)(N,{to:{name:"catalogue-list",params:{pageNumber:[$.prevPageNumber]}},class:"page-counter__arrow page-counter__arrow--back __icon-back-arrow"},null,8,["to"]),(0,l.Wm)(N,{to:{name:"catalogue-list",params:{pageNumber:[$.nextPageNumber]}},class:"page-counter__arrow page-counter__arrow--next __icon-next-arrow"},null,8,["to"])])])])]),(0,l._)("section",v,[k,(0,l.Wm)(j,{class:"container",titles:["Есть ли гарантии?","Сколько устройств можно подключить?","Какой провод использовать?"],spoilerParams:{isAccordeon:!0}},{0:(0,l.w5)((()=>[y,b,x])),1:(0,l.w5)((()=>[P,w,V,T,M])),2:(0,l.w5)((()=>[S,L])),_:1})])])}var I=a(65),$=a(8188);const N={class:"card filter"},E={class:"card__container card__side filter__container"},B={class:"filter__title",ref:"filterTitle"},F={class:"filter__title-text"},A=(0,l._)("div",{class:"filter__title-icon __icon-filter"},null,-1),j={class:"filter__main",ref:"filterBody"},W={class:"filter-block__title"},D=["type","name","value"],z={class:"checkcircle__option"},O=(0,l._)("span",null,null,-1),R={class:"filter__buttons"};function q(e,t,a,r,i,o){const n=(0,l.up)("range-block");return(0,l.wg)(),(0,l.iD)("div",N,[(0,l._)("div",E,[(0,l._)("div",B,[(0,l._)("div",F,(0,s.zw)(a.filterBlockTitle),1),A],512),(0,l._)("div",j,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.fields,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"filter-block",key:e.key},[(0,l._)("div",W,(0,s.zw)(e.title)+":",1),"checkbox"===e.inputsType||"radio"===e.inputsType?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"filter-block__list",ref_for:!0,ref:"checktypeFilterBlock"},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.keyValues[e.key],(t=>((0,l.wg)(),(0,l.iD)("label",{class:"checkcircle",key:t},[(0,l._)("input",{type:e.inputsType,name:e.key,ref_for:!0,ref:"checktypeInputs",value:t},null,8,D),(0,l._)("div",z,[O,(0,l.Uk)(" "+(0,s.zw)(o.capitalLetter(t)),1)])])))),128))],512)):(0,l.kq)("",!0),"range"===e.inputsType?((0,l.wg)(),(0,l.j4)(n,{key:1,class:"filter-block__price-range",valueString:e.rangeValueString,minValueThreshold:0,maxValueThreshold:e.maxRangeValue,ref_for:!0,ref:"rangeBlock",filterName:e.key},null,8,["valueString","maxValueThreshold","filterName"])):(0,l.kq)("",!0)])))),128)),(0,l._)("div",R,[(0,l._)("button",{class:"button filter__clear-button",onClick:t[0]||(t[0]=(...e)=>o.applyFilter&&o.applyFilter(...e))},"Применить фильтр"),(0,l._)("button",{class:"button filter__clear-button",onClick:t[1]||(t[1]=(...e)=>o.clearFilter&&o.clearFilter(...e))},"Очистить фильтр")])],512)])])}a(6699);var U=a(268);const K={class:"price-range"},H={class:"price-range__price"},Z={class:"price-range__price-input"},Y=["value"],X=(0,l._)("div",{class:"price-range__separator"},"–",-1),G={class:"price-range__price-input"},J=["value"],Q={class:"price-range__range price-range__range--double"};function ee(e,t,a,r,i,o){return(0,l.wg)(),(0,l.iD)("div",K,[(0,l._)("div",H,[(0,l._)("div",Z,[(0,l._)("input",{class:"price-range__input price-range__input--min",value:i.minValue,onInput:t[0]||(t[0]=e=>o.checkCorrectInput(e)),onChange:t[1]||(t[1]=e=>o.onInputsChange(e,"min")),type:"text",placeholder:"499",ref:"minValueInput","data-range-input":""},null,40,Y),(0,l.Uk)(" "+(0,s.zw)(a.valueString),1)]),X,(0,l._)("div",G,[(0,l._)("input",{class:"price-range__input price-range__input--max",value:i.maxValue,onInput:t[2]||(t[2]=e=>o.checkCorrectInput(e)),onChange:t[3]||(t[3]=e=>o.onInputsChange(e,"max")),type:"text",placeholder:"8499",ref:"maxValueInput","data-range-input":""},null,40,J),(0,l.Uk)(" "+(0,s.zw)(a.valueString),1)])]),(0,l._)("div",Q,[(0,l._)("div",{class:"price-range__scale",onPointerdown:t[4]||(t[4]=e=>o.moveClosestToggler(e)),ref:"scale"},[(0,l._)("div",{class:"price-range__bar",ref:"bar",style:(0,s.j5)({width:`${o.barWidth}px`,left:`${i.togglerMinPos}px`})},null,4)],544),(0,l._)("div",{class:"price-range__toggle price-range__toggle--min",ref:"togglerMin",onPointerdown:t[5]||(t[5]=e=>o.dragToggler(e,"min")),style:(0,s.j5)({left:`${i.togglerMinPos}px`})},null,36),(0,l._)("div",{class:"price-range__toggle price-range__toggle--max",ref:"togglerMax",onPointerdown:t[6]||(t[6]=e=>o.dragToggler(e,"max")),style:(0,s.j5)({left:`${i.togglerMaxPos}px`})},null,36)])])}var te={name:"RangeBlock",emits:["valuesChange"],props:{valueString:{type:String,default:""},minValueThreshold:{type:Number,default:0},maxValueThreshold:{type:Number,default:9999},filterName:String},data(){return{togglerMinPos:0,togglerMaxPos:0,minValue:0,maxValue:0,valueStep:0,widthValues:{toggler:0,scale:0}}},computed:{barWidth(){return this.togglerMaxPos-this.togglerMinPos},valueInputs(){const e=this.$refs.minValueInput,t=this.$refs.maxValueInput;return[e,t]}},methods:{...(0,I.OI)(["addNotification"]),updateSizes(){this.$refs.togglerMin&&(this.widthValues.toggler=this.$refs.togglerMin.offsetWidth),this.$refs.scale&&(this.widthValues.scale=this.$refs.scale.offsetWidth),this.valueStep=this.maxValueThreshold/(this.widthValues.scale-this.widthValues.toggler)},setDefaultPos(){let e=this.widthValues.scale;const t=(t=null)=>{t&&e===this.widthValues.scale||(this.togglerMinPos=0,this.togglerMaxPos=this.widthValues.scale-this.widthValues.toggler,e=this.widthValues.scale)};t(),window.addEventListener("resize",t)},checkCorrectInput(e){const t=e.target.value.toString();if(e.target.value=t.replace(/\D/g,""),t.length>1&&0===t.indexOf("0")){const a=t.split("");a.splice(0,1),e.target.value=a.join("")}parseInt(t)>this.maxValueThreshold&&(this.addNotification({message:`Введенное значение (${t}) превысило максимальное - ${this.maxValueThreshold}, поэтому было исправлено`,timeout:1500}),e.target.value=this.maxValueThreshold)},onTogglersMove(){this.minValue=Math.round(this.togglerMinPos*this.valueStep),this.maxValue=Math.round(this.togglerMaxPos*this.valueStep),this.$emit("valuesChange")},onInputsChange(e=null,t=null){if(e&&t){let a=e.target.value;"min"===t&&(a>this.maxValueThreshold&&(a=this.maxValueThreshold),this.minValue=parseInt(a)),"max"===t&&(a<this.minValue&&(a=this.minValue),this.maxValue=parseInt(a))}this.togglerMinPos=this.minValue/this.valueStep,this.togglerMaxPos=this.maxValue/this.valueStep,this.$emit("valuesChange")},moveClosestToggler(e){const t=(0,U.r7)(this.$refs.scale).left;let a=e.clientX-t-this.widthValues.toggler/2;const l=this.widthValues.scale-this.widthValues.toggler;a>l&&(a=l),a<0&&(a=0);const s=a-this.togglerMinPos<=this.togglerMaxPos-a;s?this.togglerMinPos=a:this.togglerMaxPos=a,this.dispatchTogglerEvent();const r=s?"min":"max";this.dragToggler(e,r)},dragToggler(e,t){const a=(0,U.r7)(this.$refs.scale).left,l=(e.target,()=>{document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",l)}),s=e=>{e.preventDefault();const s=e.clientX-a-this.widthValues.toggler/2;switch(t){case"min":s>0&&s<this.togglerMaxPos&&(this.togglerMinPos=s),s>this.togglerMaxPos&&(this.togglerMinPos=this.togglerMaxPos),s<0&&(this.togglerMinPos=0);break;case"max":const e=this.widthValues.scale-this.widthValues.toggler;s>this.togglerMinPos&&s<e&&(this.togglerMaxPos=s),s<this.togglerMinPos&&(this.togglerMaxPos=this.togglerMinPos),s>e&&(this.togglerMaxPos=e);break}this.dispatchTogglerEvent(),document.addEventListener("pointerup",l)};document.addEventListener("pointermove",s)},dispatchTogglerEvent(){document.dispatchEvent(new Event("togglerPositionChange"))}},watch:{minValue(){this.onInputsChange()},maxValue(){this.onInputsChange()}},mounted(){this.updateSizes(),this.setDefaultPos(),window.addEventListener("resize",this.updateSizes),this.onTogglersMove(),document.addEventListener("togglerPositionChange",this.onTogglersMove)}},ae=a(89);const le=(0,ae.Z)(te,[["render",ee]]);var se=le,re={name:"FilterBlock",emits:["filterApply"],components:{RangeBlock:se},props:{filterBlockTitle:{type:String,default:"Фильтр"},fields:{type:Array,required:!0},objectToFilter:{type:[Array,Object],required:!0}},computed:{keyValues(){const e={},t="checkbox, radio";for(let a in this.objectToFilter){const l=this.objectToFilter[a];for(let a of this.fields){const s=a.inputsType,r=t.indexOf(s)>=0;if(r){e[a.key]||(e[a.key]=[]);const t=e[a.key],s=(0,U.EE)(l,a.key);if("object"===typeof s)for(let e in s){const a=s[e];"object"===typeof a||t.includes(a)||t.push(a)}else"object"!==typeof s&&(t.includes(s)||t.push(s))}}}return e}},data(){return{filtered:[]}},methods:{capitalLetter:U.WA,clearFilter(){this.$refs.checktypeInputs.forEach((e=>e.checked=!1)),this.$refs.rangeBlock.forEach((e=>{e.minValue=0,e.maxValue=e.maxValueThreshold}))},applyFilter(){const e=this.filterByRanges(this.objectToFilter);this.filtered=this.filterByChecktypes(e),this.$emit("filterApply",this.filtered)},filterByRanges(e){const t=this.$refs.rangeBlock,a=Array.isArray(e);return t.forEach((t=>{const l=t.filterName,s=t.minValue,r=t.maxValue;if(a)e=e.filter(i);else{let t={};for(let a in e){const l=e[a];i(l)&&(t[a]=l)}e=t}function i(e){const t=parseInt((0,U.EE)(e,l));if(t){const e=t>=s&&t<=r;return!!e}}})),e},filterByChecktypes(e){const t=this.$refs.checktypeFilterBlock,a=Array.isArray(e);return t.forEach((t=>{const l=t.querySelector("input[type='checkbox']")||t.querySelector("input[type='radio']"),s=t.querySelectorAll("input:checked"),r=l.name;if(a)e=e.filter(i);else{const t={};for(let a in e){const l=e[a];i(l)&&(t[a]=l)}e=t}function i(e){const t=(0,U.EE)(e,r);if(!(s.length>0))return!0;for(let a of s){const e=a.value;if(e==t)return!0}}})),e}},mounted(){this.applyFilter(),new U.nH(this.$refs.filterTitle,this.$refs.filterBody,949),this.$nextTick((()=>this.applyFilter))}};const ie=(0,ae.Z)(re,[["render",q]]);var oe=ie,ne={name:"CataloguePage",components:{SpoilerTabWrapper:$.Z,FilterBlock:oe},data(){return{productsPerPage:8,filteredProducts:[],productsSortType:"",sortedProducts:[],catalogueList:[],catalogueListPage:[]}},computed:{...(0,I.Se)(["products"]),pageNumber(){const e=this.$route.params.pageNumber;return(Array.isArray(e)?parseInt(e[0]):parseInt(e))||[1]},pagesAmount(){return Math.ceil(Object.keys(this.catalogueList).length/this.productsPerPage)},nextPageNumber(){const e=this.pageNumber+1;return e<=this.pagesAmount?e:this.pagesAmount},prevPageNumber(){const e=this.pageNumber-1;return e>0?e:1}},methods:{...(0,I.nv)(["loadProducts"]),calcMaxRangeValue(e){const t=new Set;this.products.forEach((a=>{a[e]&&t.add(a[e])}));const a=Array.from(t);return Math.max(...a)},getFilteredCatalogueList(e){this.filteredProducts=e,this.$refs.sortKeysBlock.doSort(this.filteredProducts)},getSortOrder(e){this.productsSortType=e.value,this.sortedProducts&&this.getCatalogueList()},getSortedCatalogueList(e){this.sortedProducts=e,this.getCatalogueList()},getCatalogueList(){let e;switch(this.productsSortType){case"end":e=[...this.sortedProducts].reverse();break;default:e=this.sortedProducts;break}this.catalogueList=e;const t=this.productsPerPage*this.pageNumber,a=t-this.productsPerPage;this.catalogueListPage=[];for(let l=a;l<t;l++){const e=this.catalogueList[l];e&&this.catalogueListPage.push(e)}this.pageNumber>this.pagesAmount&&this.$router.push({name:"catalogue-list",params:{pageNumber:1}})}},watch:{pageNumber(){this.getCatalogueList()}},created(){this.loadProducts()}};const ce=(0,ae.Z)(ne,[["render",C]]);var ue=ce}}]);
//# sourceMappingURL=562.89549d73.js.map