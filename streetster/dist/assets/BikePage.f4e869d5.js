import{e as P,m as B,_ as I,r as v,o as a,h as A,w as x,a as e,t as d,c,g as m,n as V,F as h,y,z as D,A as p,b as f,B as u,f as O,d as w}from"./index.4c6ebddb.js";import{B as q,a as L}from"./BikeColors.493802cb.js";import"./pagination.86a3b6f2.js";const E={name:"BikeCard",props:{modelId:{type:String,required:!0}},data(){return{rootPath:P}},computed:{...B(["bikes","currency"]),bike(){return this.bikes.find(t=>t.id===this.modelId)}}},N={class:"other-models__image"},M=["src","alt"],U={class:"other-models__info"},z={class:"models-info__container"},F={class:"models-info__name-price"},R={class:"models-info__name h2"},G={class:"models-info__price"},j={class:"models-info__colors"},H={class:"colors__circles params__figures"},J={class:"colors__circle-big param__item"};function Q(t,i,_,l,o,s){const b=v("router-link");return a(),A(b,{to:{name:"bike-page",params:{bikeId:_.modelId}},class:"other-models__item"},{default:x(()=>[e("div",N,[e("img",{src:o.rootPath+s.bike.image,alt:s.bike.id},null,8,M)]),e("div",U,[e("div",z,[e("div",F,[e("div",R,d(s.bike.title),1),e("div",G,d(s.bike.price)+" "+d(t.currency),1)]),e("div",j,[e("div",H,[(a(!0),c(h,null,m(s.bike.colors.list,k=>(a(),c("div",{class:"colors__wrapper param__wrapper",key:k.code},[e("div",J,[e("div",{class:"colors__circle-small param__subitem",style:V("background-color:"+k.code)},null,4)])]))),128))])])])])]),_:1},8,["to"])}var W=I(E,[["render",Q]]);const X={name:"BikePage",components:{BikeSlider:q,BikeColors:L,BikeCard:W},data(){return{rootPath:P,isAddedToCart:!1,currentColorCode:"",checkedAccs:[],lastOrderId:null,bikeParams:{color:{title:"\u0426\u0432\u0435\u0442",data:null}},prices:{bike:0,accessories:0}}},computed:{...B(["bikes","accessories","currency"]),bikeId(){const t=this.$route.params.bikeId;if(!this.bikes.find(i=>i.id===t))this.$router.push({name:"404"});else return t},bike(){return y(this.bikes,this.bikeId)},totalPrice(){return this.prices.bike+this.prices.accessories||0},otherBikes(){return this.bike.otherModels||[]}},methods:{capitalLetter:D,getAcc(t){return y(this.accessories,t)},setCheckedParamInputs(t=0){this.$refs.paramsBlock.forEach(_=>{const l=_.querySelectorAll("input")[t];l&&(l.checked=!0,l.dispatchEvent(new Event("change")))})},setCheckedAccs(){const t=this.$refs.accessoriesParam;this.checkedAccs=t.filter(i=>i.checked),this.getPrices()},setParamsTitles(){for(let t in this.bike.params){const i=this.bike.params[t];this.bikeParams[t]={title:i.title,data:null}}},getPrices(){this.prices.bike=parseInt(this.bike.price);let t=0;this.checkedAccs.forEach(i=>{const _=this.getAcc(i.dataset.accessory);t+=parseInt(_.price)}),this.prices.accessories=t},addToCart(){const t=p.getItem("cart")||[],i=this.bike,_=this.bikeParams,l=this.checkedAccs.map(k=>this.getAcc(k.dataset.accessory)),o=this.prices,s=Date.now();this.lastOrderId=s;const b={title:i.title,bikeId:i.id,params:_,orderId:s,accessories:l,prices:o};t.push(b),p.setItem("cart",t),this.isAddedToCart=!0},cancelOrder(){const t=p.getItem("cart")||[],i=t.findIndex(_=>_.orderId===this.lastOrderId);t.splice(i,1),p.setItem("cart",t),this.lastOrderId=null,this.isAddedToCart=!1},orderMore(t=!1){this.isAddedToCart=!1,t&&(this.lastOrderId=null)}},created(){this.bike&&this.setParamsTitles()},mounted(){this.bike&&(this.setCheckedParamInputs(),this.getPrices())}},Y={class:"bike-page"},Z={class:"start-block bike-page__start-block"},K={class:"start-block__wrapper"},$={key:0,class:"start-block__container bike-order container"},ee={class:"bike-order__slider"},se={class:"bike-order__name-price"},te={class:"bike-order__name h2"},ie={class:"bike-order__price"},re={class:"bike-order__params"},ae={class:"params__text"},ce={class:"params__text-title"},oe={class:"params__figures"},de=["name","onChange"],_e=e("div",{class:"squares__square-big param__item"},[e("div",{class:"squares__square-small param__subitem"})],-1),le={class:"squares__text"},ne={class:"bike-order__accessories accessories"},ke=e("div",{class:"accessories__text"},"\u0414\u043E\u043F. \u0430\u043A\u0441\u0435\u0441\u0441\u0443\u0430\u0440\u044B:",-1),ue={class:"accessories__list"},me={class:"accessories-item__image"},he=["src"],be={class:"accessories-item__text"},ve={class:"accessories-item__name"},pe={class:"accessories-item__price"},fe={class:"accessories-item__button button-to-cart"},ge=["name","data-accessory"],Ce=e("div",{class:"button-to-cart__icon"},null,-1),ye={class:"bike-order__order"},Pe={class:"bike-order__total"},Be=e("div",{class:"bike-order__total-text"},"\u0418\u0442\u043E\u0433\u043E:",-1),Ie={key:0,class:"bike-order__button"},Ae={key:1,class:"bike-order__button"},xe=w("\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043A\u043E\u0440\u0437\u0438\u043D\u0443"),Te={key:0,class:"bike-page__other"},Se={class:"bike-page__info container"},Ve={class:"bike-page__description"},De=e("div",{class:"h3 h__left"},"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",-1),Oe={class:"text"},we=O('<div class="bike-page__feedbacks bike-feedbacks"><div class="h3 h__left">\u041E\u0442\u0437\u044B\u0432\u044B</div><ul class="bike-feedbacks__list"><li class="bike-feedbacks__item"><div class="bike-feedback__user"><div class="user__nickname">\u0410\u043D\u0434\u0440\u0435\u0439 \u041A.</div><div class="user__rating"><div class="user__rating-item __icon-star"></div><div class="user__rating-item __icon-star"></div><div class="user__rating-item __icon-star"></div><div class="user__rating-item __icon-star"></div><div class="user__rating-item __icon-star"></div></div></div><div class="bike-feedback__text text"> \u041E\u0442\u043B\u0438\u0447\u043D\u044B\u0439 \u0432\u0435\u043B\u043E\u0441\u0438\u043F\u0435\u0434, \u0441\u043E\u0432\u0435\u0442\u0443\u044E \u043A \u043F\u043E\u043A\u0443\u043F\u043A\u0435 </div></li><li class="bike-feedbacks__item"><div class="bike-feedback__user"><div class="user__nickname">\u0414\u043C\u0438\u0442\u0440\u0438\u0439 \u0416.</div><div class="user__rating"><div class="user__rating-item __icon-star"></div><div class="user__rating-item __icon-star"></div><div class="user__rating-item __icon-star"></div><div class="user__rating-item __icon-star"></div><div class="user__rating-item __icon-star"></div></div></div><div class="bike-feedback__text text"> \u0421\u043F\u043E\u0440\u0442\u0438\u0432\u043D\u0430\u044F, \u0441\u0442\u0438\u043B\u044C\u043D\u0430\u044F \u043C\u043E\u0434\u0435\u043B\u044C. \u0421\u0430\u043C \u043F\u043E \u0441\u0435\u0431\u0435 \u0437\u0430\u043D\u0438\u043C\u0430\u044E\u0441\u044C \u0441\u043F\u043E\u0440\u0442\u043E\u043C. \u0418\u043C\u0435\u043D\u043D\u043E \u043F\u043E \u044D\u0442\u043E\u0439 \u043F\u0440\u0438\u0447\u0438\u043D\u0435 \u043C\u043D\u0435 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0431\u044B\u043B\u043E \u043F\u0440\u0438\u043E\u0431\u0440\u0435\u0441\u0442\u0438 \u0434\u043B\u044F \u0441\u0435\u0431\u044F \u0432\u0435\u043B\u043E\u0441\u0438\u043F\u0435\u0434. \u0418\u043D\u0442\u0435\u0440\u0435\u0441\u043E\u0432\u0430\u043B \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442. \u041D\u0440\u0430\u0432\u0438\u0442\u0441\u044F, \u0447\u0442\u043E\u0431\u044B \u0432\u0435\u043B\u043E\u0441\u0438\u043F\u0435\u0434 \u0431\u044B\u043B \u0441\u043F\u043E\u0440\u0442\u0438\u0432\u043D\u044B\u043C. \u041F\u043E\u043D\u0440\u0430\u0432\u0438\u043B\u0430\u0441\u044C \u043D\u0430 \u0441\u0430\u0439\u0442\u0435 \u043C\u043D\u0435 \u0442\u0430\u043A\u0430\u044F \u043C\u043E\u0434\u0435\u043B\u044C. \u0423 \u043D\u0435\u0433\u043E \u0446\u0438\u043A\u043B\u043E\u043A\u0440\u043E\u0441\u0441\u043E\u0432\u0430\u044F \u043A\u043E\u043C\u043F\u043B\u0435\u043A\u0442\u0430\u0446\u0438\u044F. \u041F\u043E\u044D\u0442\u043E\u043C\u0443 \u0432\u0435\u0447\u0435\u0440\u0430\u043C \u043F\u043E \u0434\u043E\u0440\u043E\u0433\u0430\u043C \u043D\u0430 \u043D\u0435\u043C \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u043E \u043C\u043E\u0436\u043D\u043E \u043A\u0430\u0442\u0430\u0442\u044C\u0441\u044F. \u0411\u044B\u0441\u0442\u0440\u044B\u0439, \u0441\u0442\u0438\u043B\u044C\u043D\u044B\u0439, \u0445\u043E\u0440\u043E\u0448\u0435\u0433\u043E \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0430. </div></li></ul></div>',1),qe={class:"bike-page__models other-models"},Le={class:"other-models"},Ee={class:"other-models__header h2 container"},Ne={class:"other-models__container container"},Me={class:"other-models__list"};function Ue(t,i,_,l,o,s){const b=v("BikeSlider"),k=v("BikeColors"),g=v("RouterLink"),T=v("BikeCard");return a(),c("main",Y,[e("div",Z,[e("div",K,[s.bike?(a(),c("div",$,[e("div",ee,[f(b,{bike:s.bike,modelValue:o.currentColorCode,"onUpdate:modelValue":i[0]||(i[0]=r=>o.currentColorCode=r)},null,8,["bike","modelValue"])]),e("div",se,[e("div",te,d(s.bike.title),1),e("div",ie,d(s.bike.price)+" "+d(t.currency),1)]),e("div",re,[f(k,{bike:s.bike,modelValue:o.currentColorCode,"onUpdate:modelValue":i[1]||(i[1]=r=>o.currentColorCode=r),colorData:o.bikeParams.color.data,"onUpdate:colorData":i[2]||(i[2]=r=>o.bikeParams.color.data=r)},null,8,["bike","modelValue","colorData"]),(a(!0),c(h,null,m(s.bike.params,(r,n)=>(a(),c("div",{class:"params",key:n,ref_for:!0,ref:"paramsBlock"},[e("div",ae,[e("div",ce,d(r.title)+":",1)]),e("form",oe,[(a(!0),c(h,null,m(r.list,(C,S)=>(a(),c("label",{class:"squares__wrapper param__wrapper",key:S},[e("input",{type:"radio",name:n,onChange:ze=>o.bikeParams[n].data=C},null,40,de),_e,e("div",le,d(C.split("/")[0]),1)]))),128))])]))),128))]),e("div",ne,[ke,e("div",ue,[(a(!0),c(h,null,m(s.bike.add_accessories,r=>(a(),c("div",{class:"accessories-item",key:r},[e("div",me,[t.accessories?(a(),c("img",{key:0,src:o.rootPath+"images/accessories/"+s.getAcc(r).image,alt:""},null,8,he)):u("",!0)]),e("div",be,[e("div",ve,d(s.getAcc(r).title),1),e("div",pe,d(s.getAcc(r).price),1)]),e("label",fe,[e("input",{type:"checkbox",name:`${s.bike.id}-accessory`,"data-accessory":r,onChange:i[3]||(i[3]=(...n)=>s.setCheckedAccs&&s.setCheckedAccs(...n)),ref_for:!0,ref:"accessoriesParam"},null,40,ge),Ce])]))),128))])]),e("div",ye,[e("div",Pe,[Be,e("p",null,d(s.totalPrice.toLocaleString())+" "+d(t.currency),1)]),o.isAddedToCart?u("",!0):(a(),c("div",Ie,[e("div",{class:"button",onClick:i[4]||(i[4]=(...r)=>s.addToCart&&s.addToCart(...r))},"\u0417\u0430\u043A\u0430\u0437\u0430\u0442\u044C"),o.lastOrderId?(a(),c("div",{key:0,class:"button",onClick:i[5]||(i[5]=r=>s.cancelOrder(!0))},"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0439 \u0437\u0430\u043A\u0430\u0437")):u("",!0)])),o.isAddedToCart?(a(),c("div",Ae,[f(g,{to:{name:"cart"},class:"button"},{default:x(()=>[xe]),_:1}),e("div",{class:"button",onClick:i[6]||(i[6]=(...r)=>s.cancelOrder&&s.cancelOrder(...r))},"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u043A\u0430\u0437"),e("div",{class:"button",onClick:i[7]||(i[7]=r=>s.orderMore(!1))},"\u0417\u0430\u043A\u0430\u0437\u0430\u0442\u044C \u0435\u0449\u0451")])):u("",!0)])])):u("",!0)])]),s.bike?(a(),c("section",Te,[e("div",Se,[e("div",Ve,[De,e("div",Oe,[(a(!0),c(h,null,m(s.bike.description,(r,n)=>(a(),c("p",{key:n},d(r),1))),128))])]),we]),e("div",qe,[e("div",Le,[e("div",Ee,"\u0414\u0440\u0443\u0433\u0438\u0435 \u043C\u043E\u0434\u0435\u043B\u0438 "+d(s.capitalLetter(s.bike.category))+" Series",1),e("div",Ne,[e("div",Me,[(a(!0),c(h,null,m(s.otherBikes,r=>(a(),A(T,{key:r,modelId:r},null,8,["modelId"]))),128))])])])])])):u("",!0)])}var je=I(X,[["render",Ue]]);export{je as default};
