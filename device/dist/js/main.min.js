function checkWebpSupport(){return new Promise(((e,t)=>{let n=new Image;n.onload=function(){e(document.querySelector("body").classList.add("webp"))},n.onerror=function(){t(document.querySelector("body").classList.remove("webp"))},n.src="../img/check-webp/check.webp"}))}checkWebpSupport(),setTimeout((()=>{const e=document.createElement("script");e.src="../js/swiper-bundle.min.js",document.body.append(e),setTimeout(initSliders,100)}),100);let counter=0;function initSliders(){if("undefined"==typeof Swiper)return counter++,counter<20?setTimeout(initSliders,100):void 0;new Swiper(".main-slider",{pagination:{el:".main-slider__pagination",type:"bullets",clickable:!0},autoplay:{delay:7500},speed:0,allowTouchMove:!1});const e=new Swiper(".consumer-info__slider",{speed:0,allowTouchMove:!1});!function(){function t(e,t){e.forEach((e=>e.classList.remove("__active"))),t.classList.add("__active")}document.querySelectorAll(".consumer-info").forEach((n=>{const r=n.querySelectorAll(".consumer-info__pagination-button"),o=n.querySelector(".consumer-info__slider"),i=Array.from(o.querySelectorAll(".consumer-info__slide"));let s=e;if(e.length>0)for(let t=0;t<e.length;t++){const n=e[t];n.el===o&&(s=n)}!function(e,n,r){const o=0,i=n[o];e[o];r.slideTo(o),t(n,i)}(i,r,s);const c=[];for(let e=0;e<r.length;e++){const t=e,n={btn:r[e],slide:i[e],slideIndex:t};c.push(n)}c.forEach((e=>{e.btn.addEventListener("click",(()=>{e.btn&&e.slide&&(s.slideTo(e.slideIndex),t(r,e.btn))}))}))}))}()}function getCoords(e){const t=e.getBoundingClientRect();return{top:t.top,left:t.left}}function toggleBody(e,t,n=null){n||(n=767);const r=window.matchMedia(`(max-width: ${n}px)`),o=t.offsetHeight;function i(){r.matches?(a(),e.addEventListener("click",s)):(e.removeEventListener("click",s),c())}function s(){e.classList.contains("__active")?a():c()}function c(){e.classList.add("__active"),t.style.maxHeight=2*o+"px",t.style.removeProperty("padding")}function a(){e.classList.remove("__active"),t.style.cssText="\n        max-height: 0px;\n        padding: 0px;\n    "}i(),r.addEventListener("change",i)}function deferredMapsLoading(){const e=document.querySelector("#map");if(!e)return;const t=new IntersectionObserver((o=>{const i=o[0];(i.boundingClientRect.top<=document.documentElement.offsetHeight||window.offsetHeight||i.isIntersecting)&&!r&&(!function(){const t=document.createElement("iframe");t.src="https://yandex.ru/map-widget/v1/?um=constructor%3Aac473187741f5d897b5dc10b78069cc6f6aea0f00ad658742fb27e942ee63ca2&amp;source=constructor",t.frameborder="0",e.append(t)}(),r=!0,t.unobserve(n))}),{threshold:1}),n=document.querySelector("#intersection-load-maps");let r=!1;t.observe(n)}deferredMapsLoading();class Header{constructor(){this.header=document.querySelector(".header"),this.toggleMenu()}toggleMenu(){toggleBody(this.header.querySelector(".burger"),this.header.querySelector(".header__main"),767)}}const header=new Header;function catalogueHoverInit(){document.querySelectorAll(".catalogue-item").forEach((e=>{const t=e.querySelector(".catalogue-item__image"),n=document.createElement("div");n.className="catalogue-item__hover",n.innerHTML='\n            <button class="catalogue-item__hover-button button">\n                В корзину\n            </button>\n            <div class="catalogue-item__hover-option">\n                Добавить к сравнению \n            </div>\n        ',t.append(n),t.addEventListener("mouseover",(()=>t.querySelector(".catalogue-item__hover").classList.add("__active"))),t.addEventListener("mouseleave",(()=>t.querySelector(".catalogue-item__hover").classList.remove("__active")))}))}catalogueHoverInit();class Range{constructor(){const e=document.querySelectorAll(".range");e.length>0&&e.forEach((e=>{this.initRange(e)}))}initRange(e){const t=e.querySelector(".range__wrapper"),n=e.querySelector(".range__bar"),r=e.querySelector(".range__scale"),o=e.querySelector(".range__circle--min"),i=e.querySelector(".range__circle--max");e.querySelector(".range__min"),e.querySelector(".range__max");c=c.bind(this);let s=n.offsetWidth-i.offsetWidth;function c(){s=n.offsetWidth-i.offsetWidth,o.style.left="0px",i.style.left=`${s}px`,this.drawScale(r,o,i),this.setValues(e,s),this.drawScale(r,o,i),this.setValues(e,s)}function a(n){if(n.preventDefault(),n.target!=o&&n.target!=i){let e=n.clientX-getCoords(t).left;const r=this.nearestCircle(e,o,i);e=this.checkIfOutsideBar(e,s,o),r.style.left=e-o.offsetWidth/2+"px"}if(n.target==o||n.target==i){function c(c){let l=c.clientX-getCoords(t).left;l=parseInt(this.checkIfOutsideBar(l,s,o))-n.target.offsetWidth/2,n.target==o&&l>=parseInt(getComputedStyle(i).left)&&(l=`${parseInt(getComputedStyle(i).left)}px`),n.target==i&&l<=parseInt(getComputedStyle(o).left)&&(l=`${parseInt(getComputedStyle(o).left)}px`),a(l),this.drawScale(r,o,i),this.setValues(e,s)}function a(e){n.target.style.left=`${e}px`}c=c.bind(this),n.target.ondragstart=function(){return!1},document.addEventListener("pointermove",c),document.addEventListener("pointerup",(()=>{document.removeEventListener("pointermove",c),t.onpointerup=null}))}this.drawScale(r,o,i),this.setValues(e,s),t.onpointerup=null}c(),window.addEventListener("resize",c),a=a.bind(this),t.addEventListener("pointerdown",a)}checkIfOutsideBar(e,t,n){const r=n.offsetWidth/2;return e>t?t+r:e<n.offsetWidth/2?r:e>=r&&e<=t?e:void 0}nearestCircle(e,t,n){const r=parseInt(getComputedStyle(t).left),o=parseInt(getComputedStyle(n).left);return Math.abs(e-r)<Math.abs(e-o)?t:Math.abs(e-r)>Math.abs(e-o)?n:void 0}drawScale(e,t,n){const r=parseInt(getComputedStyle(n).left)-parseInt(getComputedStyle(t).left);e.style.cssText=`\n            position: absolute;\n            top: 0;\n            width: ${r}px;\n            left: ${getComputedStyle(t).left};\n        `}moveAt(e,t){e.style.left=t-e/2+"px"}setValues(e,t){const n=e.dataset.rangeBorders.split(", "),r=parseInt(n[0]),o=(parseInt(n[1])-r)/t,i=parseInt(getComputedStyle(e.querySelector(".range__circle--min")).left),s=parseInt(getComputedStyle(e.querySelector(".range__circle--max")).left),c=Math.round(o*i),a=Math.round(o*s),l=e.querySelector(".range__min").querySelector("span"),d=e.querySelector(".range__max").querySelector("span");l.innerHTML=c,d.innerHTML=a}}class Filter{constructor(){this.initRanges(),this.filterToggle()}initRanges(){new Range}filterToggle(){const e=document.querySelector(".filter");if(e){const t=e.querySelector(".filter__title"),n=e.querySelector(".filter__body");let r=e.dataset.hideFilterMedia;parseInt(r)||(r=859),toggleBody(t,n,859)}}}const filter=new Filter;