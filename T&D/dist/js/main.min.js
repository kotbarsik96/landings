function checkWebpSupport(){return new Promise(((e,t)=>{let r=new Image;r.onload=function(){e(document.querySelector("body").classList.add("webp"))},r.onerror=function(){t(document.querySelector("body").classList.remove("webp"))},r.src="img/check-webp/check.webp"}))}function initShorts(){new class{constructor(){this.header=document.querySelector(".header"),this.toggleMenuListener(),this.scrollHandler(),this.setPaddingTop(),this.toggleCartMenu()}toggleMenuListener(){const e=this.header.querySelector(".burger");e.addEventListener("click",(()=>{const t=e.parentNode.querySelector(".toggling-menu");e.classList.toggle("__active"),e.classList.contains("__active")?t.classList.add("__active"):t.classList.remove("__active")}))}scrollHandler(){const e=this.header,t=this.header.querySelector(".header-top");let r=window.pageYOffset;window.addEventListener("scroll",(function(){let o=window.pageYOffset;r<o&&(e.style.top=`-${t.offsetHeight}px`);r>o&&(e.style.top="0px");r=o}))}setPaddingTop(){const e=document.querySelector(".main"),t=this.header.offsetHeight+"px";e&&(e.style.paddingTop=t)}toggleCartMenu(){const e=Array.from(document.querySelectorAll(".button--cart")),t=this.header.querySelector(".cart");function r(e){const r=function(){const e=document.createElement("div");e.style.cssText="\n                    width: 50px;\n                    height: 50px;\n                    overflow: scroll;\n                ",document.body.append(e);const t=e.offsetWidth-e.clientWidth;return e.remove(),t}();(this.classList.contains("button--cart")||e.target.classList.contains("cart"))&&(t.classList.toggle("__active"),t.classList.contains("__active")?o(!1,r):o(!0))}function o(e,t=0){const r=document.querySelector("body"),o=r.querySelector(".header");e?(r.style.removeProperty("overflow"),r.style.removeProperty("padding-right"),o.style.removeProperty("padding-right")):(r.style.overflow="hidden",r.style.paddingRight=`${t}px`,o.style.paddingRight=`${t}px`)}e.length>0&&t&&(e.forEach((e=>e.addEventListener("click",r))),t.addEventListener("click",r))}};!function(){function e(e){e.forEach((e=>e.parentNode.classList.remove("__active")))}document.querySelectorAll(".nav").forEach((t=>{const r=t.querySelectorAll(".nav__title");r.forEach((t=>{t.addEventListener("click",(()=>{t.parentNode.classList.contains("__active")?e(r):function(t,r){e(r),t.parentNode.classList.add("__active")}(t,r)}))}))}))}(),document.querySelectorAll("input[data-only-number]").forEach((e=>{e.addEventListener("input",(function(){let t=e.value;e.value=t.replace(/\D/g,"")}))}))}function getStorage(e){if("string"==typeof e){let t=JSON.parse(localStorage.getItem(e));return t||(t=[]),t}}function setStorage(e,t){if("string"==typeof e){const r=JSON.stringify(t);localStorage.setItem(e,r)}}function initBrowsing(){const e=Array.from(document.querySelectorAll(".browsing"));e.length>0&&e.forEach((e=>{const t=e.querySelector(".browsing__wrapper"),r=Array.from(e.querySelectorAll("[data-browsing-button]")),o=[];function n(r=null){if(r){const e=this,r=t.querySelector(`[data-browsing-elem="${e.dataset.browsingButton}"]`);o.forEach((n=>{n.elem===r&&function(e,r){s(r,e.elem);const n=o.indexOf(e);t.style.cssText=`\n                    transform: translate(-${100*n}%, 0);\n                    max-height: ${e.elem.offsetHeight}px;\n                `}(n,e)}))}else!function(){const r=o[0];s(e.querySelector(`[data-browsing-button="${r.name}"]`),r.elem),t.style.cssText=`\n                    transform: translate(0, 0);\n                    max-height: ${r.elem.offsetHeight}px;\n                `}()}function s(e,t){r.forEach((e=>e.classList.remove("__active"))),o.forEach((e=>e.elem.classList.remove("__active"))),e.classList.add("__active"),t.classList.add("__active")}r.forEach((e=>{const r=e.dataset.browsingButton,s={name:r,elem:t.querySelector(`[data-browsing-elem="${r}"]`)};o.push(s),e.addEventListener("click",n)})),n()}))}checkWebpSupport();const CartApp={data:()=>({products:[],cart:[]}),mounted(){fetch("js/JSON/products.json").then((e=>e.json())).then((e=>this.products=e)).then((()=>{this.refreshCart(),initShorts(),initBrowsing()}))},methods:{refreshCart(){this.cart=getStorage("tad_cart");document.querySelectorAll(".button__circle--cart").forEach((e=>e.innerHTML=this.cart.length))},addToCart(e,t,r){const o=r.target.closest(".menu-item").querySelector('input[name="amount"]').value,n={type:t,name:e.name,img:e.img,index:e.index,amount:o,pricePer:e.price,priceTotal:parseFloat(e.price)*o},s=getStorage("tad_cart");s.push(n),setStorage("tad_cart",s),this.refreshCart()},removeFromCart(e){const t=getStorage("tad_cart");t.splice(e,1),setStorage("tad_cart",t),this.refreshCart()}}};Vue.createApp(CartApp).mount("#cart-app");